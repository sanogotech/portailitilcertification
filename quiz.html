<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz de Certification ITIL Fondation</title>
    <!-- Lien vers Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Lien vers Font Awesome pour les icônes -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Styles CSS personnalisés pour le quiz ITIL */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #e8f0f7;
            color: #2c3e50;
            padding-top: 30px;
            padding-bottom: 30px;
        }
        .quiz-container {
            max-width: 950px;
            margin: auto;
            background-color: #ffffff;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.18);
            animation: fadeIn 1s ease-out;
        }
        .quiz-header {
            text-align: center;
            margin-bottom: 40px;
            color: #3498db;
            font-weight: 700;
            font-size: 2.8rem;
            position: relative;
            padding-bottom: 18px;
        }
        .quiz-header::after {
            content: '';
            position: absolute;
            left: 50%;
            bottom: 0;
            transform: translateX(-50%);
            width: 120px;
            height: 5px;
            background-color: #2c3e50;
            border-radius: 3px;
        }

        .score-progress-container {
            display: flex;
            flex-direction: column;
            margin-bottom: 25px;
            padding: 15px 25px;
            background-color: #f0f8ff;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            font-weight: 600;
            color: #2c3e50;
        }
        .score-display, .question-progress-display {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            margin-bottom: 10px;
        }
        .question-progress-display {
            margin-bottom: 0;
        }
        .progress {
            height: 15px;
            border-radius: 10px;
            background-color: #e9ecef;
            flex-grow: 1;
            margin-left: 20px;
        }
        .progress-bar {
            background-color: #3498db;
            border-radius: 10px;
            transition: width 0.5s ease-in-out;
        }

        .question-card {
            margin-bottom: 35px;
            border: none;
            border-radius: 12px;
            padding: 30px;
            background-color: #fefefe;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .question-card:hover {
            transform: translateY(-7px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        .question-card h5 {
            margin-bottom: 25px;
            color: #2c3e50;
            font-weight: 600;
            font-size: 1.4rem;
            line-height: 1.5;
        }
        .answer-option {
            margin-bottom: 15px;
            padding: 15px 20px;
            border: 1px solid #d0d9e2;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            background-color: #f8fbfd;
        }
        .answer-option:hover {
            background-color: #eef7ff;
            border-color: #9ac7ed;
        }
        .answer-option input[type="radio"] {
            margin-right: 18px;
            transform: scale(1.3);
            cursor: pointer;
        }
        .answer-option label {
            cursor: pointer;
            flex-grow: 1;
        }

        /* Styles pour les retours (correct/incorrect) en mode apprentissage */
        .answer-option.correct {
            background-color: #d4edda;
            border-color: #28a745;
            font-weight: bold;
            color: #155724;
            animation: pulseGreen 0.5s ease-out;
        }
        .answer-option.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545;
            font-weight: bold;
            color: #721c24;
            animation: shakeRed 0.5s ease-out;
        }
        .rationale {
            margin-top: 20px;
            padding: 20px;
            background-color: #e9eff5;
            border-left: 6px solid #607d8b;
            border-radius: 8px;
            font-size: 1em;
            color: #455a64;
            display: none;
            animation: slideInUp 0.4s ease-out;
        }
        .rationale ul {
            list-style-type: none;
            padding-left: 0;
            margin-bottom: 0;
        }
        .rationale li {
            margin-bottom: 8px;
            line-height: 1.4;
        }
        .rationale li:last-child {
            margin-bottom: 0;
        }

        .hint {
            margin-top: 20px;
            padding: 15px;
            background-color: #fff8e1;
            border-left: 6px solid #ffb300;
            border-radius: 8px;
            font-size: 0.95em;
            color: #a1887f;
            display: none;
            animation: slideInUp 0.4s ease-out;
        }
        .show-info {
            display: block;
        }
        .btn-toggle-info {
            margin-top: 20px;
            font-size: 0.95em;
            padding: 10px 20px;
            border-radius: 6px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .btn-toggle-info:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        /* Styles pour le pop-up de résultats (modal) */
        .results-modal .modal-content {
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            padding: 20px;
            text-align: center;
        }
        .results-modal .modal-header {
            border-bottom: none;
            padding-bottom: 0;
            justify-content: center;
        }
        .results-modal .modal-title {
            font-size: 2.5rem;
            font-weight: bold;
            color: #2c3e50;
        }
        .results-modal .modal-body {
            padding-top: 20px;
            padding-bottom: 20px;
        }
        .results-modal .score-text {
            font-size: 1.8rem;
            color: #495057;
            margin-bottom: 15px;
        }
        .results-modal .score-percentage {
            font-size: 4rem;
            font-weight: bold;
            margin-bottom: 30px;
        }
        .results-modal .recommendations {
            margin-top: 20px;
            padding: 20px;
            background-color: #e9eff5;
            border-radius: 10px;
            border-left: 6px solid #3498db;
            text-align: left;
        }
        .results-modal .recommendations h4 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        .results-modal .recommendations ul {
            list-style-type: disc;
            padding-left: 25px;
        }
        .results-modal .recommendations li {
            margin-bottom: 8px;
            color: #495057;
        }
        .results-modal .modal-footer {
            border-top: none;
            padding-top: 0;
            justify-content: center;
        }
        .results-modal #restart-quiz-btn-modal {
            padding: 12px 30px;
            font-size: 1.2rem;
            border-radius: 8px;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes pulseGreen {
            0% { transform: scale(1); }
            50% { transform: scale(1.005); }
            100% { transform: scale(1); }
        }
        @keyframes shakeRed {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-8px); }
            40%, 80% { transform: translateX(8px); }
        }
        
        /* Badges de difficulté */
        .difficulty-badge {
            font-size: 0.8rem;
            padding: 3px 8px;
            border-radius: 10px;
            margin-left: 10px;
        }
        .easy {
            background-color: #28a745;
            color: white;
        }
        .medium {
            background-color: #ffc107;
            color: #212529;
        }
        .hard {
            background-color: #dc3545;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container quiz-container">
        <h2 class="quiz-header">Quiz de Certification ITIL Fondation</h2>
        <p class="text-center text-muted mb-5">Testez vos connaissances sur les concepts clés d'ITIL v4. Chaque question offre un indice et une explication détaillée.</p>

        <div class="score-progress-container">
            <div class="score-display">
                <span id="current-score-display">Score: 0 / 0</span>
            </div>
            <div class="question-progress-display">
                <span id="question-count-display">Question: 1 / 40</span>
                <div class="progress">
                    <div id="question-progress-bar" class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
        </div>

        <div id="quiz-display">
            <!-- La question actuelle sera chargée dynamiquement ici par JavaScript -->
            <div class="text-center my-5" id="loading-spinner">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Chargement des questions...</span>
                </div>
                <p class="mt-2 text-muted">Chargement des questions du quiz...</p>
            </div>
        </div>

        <div class="d-flex justify-content-between mt-4" id="quiz-navigation">
            <button id="prev-btn" class="btn btn-primary" disabled>
                <i class="fas fa-arrow-left me-2"></i> Précédent
            </button>
            <button id="next-btn" class="btn btn-primary" disabled>
                Suivant <i class="fas fa-arrow-right ms-2"></i>
            </button>
        </div>
    </div>

    <!-- Modal pour les résultats du quiz -->
    <div class="modal fade results-modal" id="resultsModal" tabindex="-1" aria-labelledby="resultsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="resultsModalLabel">Résultats du Quiz</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p class="score-text">Vous avez répondu correctement à <span id="final-score-correct">0</span> questions sur <span id="final-score-total">0</span>.</p>
                    <p class="score-percentage" id="final-score-percentage" style="color: #28a745;">0%</p>
                    <div class="recommendations" id="final-recommendations">
                        <!-- Recommandations seront insérées ici -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="restart-quiz-btn-modal">
                        <i class="fas fa-redo me-2"></i> Recommencer le quiz
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Lien vers Bootstrap JS Bundle (inclut Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const quizDisplayDiv = document.getElementById('quiz-display');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const loadingSpinner = document.getElementById('loading-spinner');
        const quizNavigationDiv = document.getElementById('quiz-navigation');
        const currentScoreDisplay = document.getElementById('current-score-display');
        const questionCountDisplay = document.getElementById('question-count-display');
        const questionProgressBar = document.getElementById('question-progress-bar');

        // Modal elements
        const resultsModal = new bootstrap.Modal(document.getElementById('resultsModal'));
        const finalScoreCorrectSpan = document.getElementById('final-score-correct');
        const finalScoreTotalSpan = document.getElementById('final-score-total');
        const finalScorePercentage = document.getElementById('final-score-percentage');
        const finalRecommendationsDiv = document.getElementById('final-recommendations');
        const restartQuizBtnModal = document.getElementById('restart-quiz-btn-modal');

        let currentQuestionIndex = 0;
        let questions = [];
        let score = 0;
        let userAnswers = new Array(40).fill(null);

        // Données du quiz ITIL Fondation (40 questions)
        const quizData = {
            "title": "Quiz de Certification ITIL Fondation",
            "questions": [
                // 15 questions faciles
                {
                    "question": "Quelle est la définition d'un service selon ITIL?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Un moyen de permettre la co-création de valeur en facilitant les résultats que les clients veulent atteindre", "rationale": "C'est la définition exacte d'un service selon ITIL. Un service permet la co-création de valeur entre le fournisseur et le client.", "is_correct": true},
                        {"text": "Un produit vendu par une entreprise à ses clients", "rationale": "Trop restrictif - un service est plus qu'un simple produit, il inclut la co-création de valeur.", "is_correct": false},
                        {"text": "Une activité effectuée par une organisation pour gagner de l'argent", "rationale": "Trop centré sur l'organisation - un service doit créer de la valeur pour le client.", "is_correct": false},
                        {"text": "Un ensemble de processus IT standardisés", "rationale": "Trop technique - un service est plus large que des processus IT.", "is_correct": false}
                    ],
                    "hint": "Pensez à la création de valeur conjointe entre fournisseur et client."
                },
                {
                    "question": "Quel est l'objectif principal de la pratique de gestion des incidents?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Restaurer le service normal aussi rapidement que possible", "rationale": "L'objectif principal de la gestion des incidents est de restaurer le service normal dans les plus brefs délais.", "is_correct": true},
                        {"text": "Identifier la cause racine des problèmes", "rationale": "C'est l'objectif de la gestion des problèmes, pas des incidents.", "is_correct": false},
                        {"text": "Documenter tous les changements dans le système", "rationale": "C'est l'objectif de la gestion des changements.", "is_correct": false},
                        {"text": "Améliorer en continu les services", "rationale": "C'est un objectif plus large qui concerne l'amélioration continue.", "is_correct": false}
                    ],
                    "hint": "Pensez à la réactivité et à la minimisation des impacts."
                },
                {
                    "question": "Quelle est la bonne séquence des étapes du cycle de vie du service dans ITIL v3?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Stratégie, Conception, Transition, Exploitation, Amélioration continue", "rationale": "C'est la séquence correcte des étapes du cycle de vie du service dans ITIL v3.", "is_correct": true},
                        {"text": "Planification, Développement, Test, Déploiement, Support", "rationale": "Cette séquence est trop technique et ne reflète pas les étapes ITIL.", "is_correct": false},
                        {"text": "Identification, Analyse, Solution, Implémentation, Revue", "rationale": "Cette séquence ressemble à un processus de résolution de problème, pas au cycle de vie ITIL.", "is_correct": false},
                        {"text": "Définition, Conception, Construction, Validation, Maintenance", "rationale": "Cette séquence est inspirée du développement logiciel, pas d'ITIL.", "is_correct": false}
                    ],
                    "hint": "Pensez aux grandes phases de la gestion des services."
                },
                {
                    "question": "Quel est le rôle du Centre de services (Service Desk) dans ITIL?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Point de contact unique entre le fournisseur de services et les utilisateurs", "rationale": "Le Centre de services est effectivement le point de contact unique entre le fournisseur et les utilisateurs.", "is_correct": true},
                        {"text": "Gestion des actifs matériels de l'entreprise", "rationale": "C'est le rôle de la gestion des actifs, pas du Centre de services.", "is_correct": false},
                        {"text": "Développement de nouveaux services IT", "rationale": "C'est le rôle du développement, pas du Centre de services.", "is_correct": false},
                        {"text": "Audit des processus IT", "rationale": "C'est le rôle de l'audit ou de la gouvernance, pas du Centre de services.", "is_correct": false}
                    ],
                    "hint": "Pensez à la fonction qui centralise les demandes et incidents."
                },
                {
                    "question": "Quelle pratique a pour objectif de s'assurer que les services répondent aux besoins actuels et futurs des clients?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Gestion du niveau de service", "rationale": "La gestion du niveau de service (SLM) vise précisément à s'assurer que les services répondent aux besoins des clients.", "is_correct": true},
                        {"text": "Gestion des incidents", "rationale": "La gestion des incidents traite des interruptions de service, pas de leur adéquation aux besoins.", "is_correct": false},
                        {"text": "Gestion des problèmes", "rationale": "La gestion des problèmes traite des causes racines, pas de l'adéquation des services.", "is_correct": false},
                        {"text": "Gestion des changements", "rationale": "La gestion des changements traite des modifications contrôlées, pas de l'adéquation des services.", "is_correct": false}
                    ],
                    "hint": "Pensez aux accords de niveau de service (SLA)."
                },
                {
                    "question": "Quel document définit les niveaux de service attendus entre un fournisseur et un client?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Accord de niveau de service (SLA)", "rationale": "Le SLA (Service Level Agreement) est le document qui définit formellement les niveaux de service attendus.", "is_correct": true},
                        {"text": "Plan de continuité des services", "rationale": "Ce document traite des plans de reprise, pas des niveaux de service normaux.", "is_correct": false},
                        {"text": "Catalogue de services", "rationale": "Le catalogue liste les services disponibles, mais ne définit pas les niveaux de service.", "is_correct": false},
                        {"text": "Contrat de fourniture de services", "rationale": "Bien que lié, ce document est plus large et souvent juridique, pas spécifique aux niveaux de service.", "is_correct": false}
                    ],
                    "hint": "Pensez à l'acronyme SLA."
                },
                {
                    "question": "Quelle est la première étape du processus de gestion des incidents?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Identification de l'incident", "rationale": "L'identification est effectivement la première étape - on ne peut pas gérer ce qu'on n'a pas identifié.", "is_correct": true},
                        {"text": "Analyse de la cause racine", "rationale": "L'analyse vient plus tard dans le processus.", "is_correct": false},
                        {"text": "Classification de l'incident", "rationale": "La classification vient après l'identification.", "is_correct": false},
                        {"text": "Résolution de l'incident", "rationale": "La résolution est l'étape finale, pas la première.", "is_correct": false}
                    ],
                    "hint": "Pensez à la détection initiale du problème."
                },
                {
                    "question": "Quelle pratique est responsable de la gestion des modifications planifiées dans les services IT?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Gestion des changements", "rationale": "La gestion des changements est effectivement responsable des modifications planifiées.", "is_correct": true},
                        {"text": "Gestion des configurations", "rationale": "La gestion des configurations enregistre les changements, mais ne les gère pas.", "is_correct": false},
                        {"text": "Gestion des problèmes", "rationale": "La gestion des problèmes traite des causes racines, pas des changements.", "is_correct": false},
                        {"text": "Gestion des versions", "rationale": "La gestion des versions traite des déploiements, pas de l'ensemble des changements.", "is_correct": false}
                    ],
                    "hint": "Pensez au processus qui évalue, approuve et coordonne les modifications."
                },
                {
                    "question": "Quel est le principal objectif de la gestion des problèmes?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Identifier et éliminer les causes racines des incidents", "rationale": "C'est l'objectif principal de la gestion des problèmes.", "is_correct": true},
                        {"text": "Restaurer le service le plus rapidement possible", "rationale": "C'est l'objectif de la gestion des incidents.", "is_correct": false},
                        {"text": "Documenter tous les composants IT", "rationale": "C'est l'objectif de la gestion des configurations.", "is_correct": false},
                        {"text": "Planifier les nouvelles fonctionnalités", "rationale": "C'est l'objectif de la gestion du portefeuille de services.", "is_correct": false}
                    ],
                    "hint": "Pensez à la prévention des incidents récurrents."
                },
                {
                    "question": "Quel est l'objectif de la gestion des configurations?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Maintenir des informations précises sur les actifs de service et leurs relations", "rationale": "C'est l'objectif principal de la gestion des configurations.", "is_correct": true},
                        {"text": "Gérer les demandes des utilisateurs", "rationale": "C'est le rôle du centre de services.", "is_correct": false},
                        {"text": "Planifier les capacités futures", "rationale": "C'est l'objectif de la gestion de la capacité.", "is_correct": false},
                        {"text": "Négocier les contrats avec les fournisseurs", "rationale": "C'est le rôle de la gestion des fournisseurs.", "is_correct": false}
                    ],
                    "hint": "Pensez à la base de données des éléments de configuration (CMDB)."
                },
                {
                    "question": "Quelle est la différence entre un incident et un problème dans ITIL?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Un incident est une interruption de service, un problème en est la cause inconnue", "rationale": "C'est la distinction correcte entre incident et problème.", "is_correct": true},
                        {"text": "Un incident est mineur, un problème est majeur", "rationale": "La gravité n'est pas ce qui différencie incident et problème.", "is_correct": false},
                        {"text": "Un incident concerne le matériel, un problème le logiciel", "rationale": "Cette distinction par type de composant est incorrecte.", "is_correct": false},
                        {"text": "Un incident est planifié, un problème ne l'est pas", "rationale": "C'est l'inverse - les incidents ne sont pas planifiés.", "is_correct": false}
                    ],
                    "hint": "Pensez à la relation cause/conséquence."
                },
                {
                    "question": "Quel document décrit tous les services IT disponibles pour les clients?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Catalogue de services", "rationale": "Le catalogue de services liste effectivement tous les services disponibles.", "is_correct": true},
                        {"text": "Accord de niveau de service", "rationale": "Le SLA définit les niveaux de service, pas la liste des services.", "is_correct": false},
                        {"text": "Plan de continuité", "rationale": "Ce document traite des plans de reprise, pas des services normaux.", "is_correct": false},
                        {"text": "Base de données des configurations", "rationale": "La CMDB recense les composants, pas les services.", "is_correct": false}
                    ],
                    "hint": "Pensez à un document similaire à un catalogue commercial."
                },
                {
                    "question": "Quelle pratique est responsable de la gestion des relations avec les fournisseurs externes?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Gestion des fournisseurs", "rationale": "La gestion des fournisseurs est effectivement responsable des relations avec les fournisseurs externes.", "is_correct": true},
                        {"text": "Gestion des incidents", "rationale": "La gestion des incidents traite des interruptions de service, pas des fournisseurs.", "is_correct": false},
                        {"text": "Gestion des configurations", "rationale": "La gestion des configurations traite des actifs, pas des relations.", "is_correct": false},
                        {"text": "Gestion des niveaux de service", "rationale": "La gestion des niveaux de service traite des SLA, pas spécifiquement des fournisseurs.", "is_correct": false}
                    ],
                    "hint": "Pensez aux contrats et accords avec les tiers."
                },
                {
                    "question": "Quel est le but principal de la gestion des connaissances dans ITIL?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Maintenir et partager les informations utiles à la fourniture des services", "rationale": "C'est l'objectif principal de la gestion des connaissances.", "is_correct": true},
                        {"text": "Former tous les nouveaux employés", "rationale": "La formation est une activité connexe mais pas l'objectif principal.", "is_correct": false},
                        {"text": "Documenter les procédures techniques", "rationale": "C'est une partie de la gestion des connaissances, mais pas son but principal.", "is_correct": false},
                        {"text": "Gérer les licences logicielles", "rationale": "C'est le rôle de la gestion des actifs, pas des connaissances.", "is_correct": false}
                    ],
                    "hint": "Pensez au partage d'informations et à la base de connaissances."
                },
                {
                    "question": "Quelle est la définition d'un actif de service dans ITIL?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Toute ressource ou capacité utilisée pour fournir un service", "rationale": "C'est la définition correcte d'un actif de service.", "is_correct": true},
                        {"text": "Un équipement informatique coûteux", "rationale": "Trop restrictif - les actifs de service incluent plus que le matériel.", "is_correct": false},
                        {"text": "Les logiciels installés sur les serveurs", "rationale": "Trop technique - les actifs de service sont plus larges.", "is_correct": false},
                        {"text": "Les contrats avec les fournisseurs", "rationale": "Trop spécifique - les actifs de service incluent plus que les contrats.", "is_correct": false}
                    ],
                    "hint": "Pensez aux ressources nécessaires pour fournir un service."
                },
                {
                    "question": "Quel est le principal avantage de l'approche processus dans ITIL?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Améliorer l'efficacité et la cohérence dans la fourniture des services", "rationale": "C'est l'avantage principal de l'approche processus.", "is_correct": true},
                        {"text": "Réduire les coûts du personnel", "rationale": "Ce peut être un effet secondaire, mais pas l'avantage principal.", "is_correct": false},
                        {"text": "Automatiser toutes les tâches IT", "rationale": "L'automatisation est une possibilité, mais pas l'objectif principal.", "is_correct": false},
                        {"text": "Éliminer tous les incidents", "rationale": "Impossible à atteindre et pas l'objectif de l'approche processus.", "is_correct": false}
                    ],
                    "hint": "Pensez à la standardisation et à la répétabilité."
                },

                // 15 questions de difficulté moyenne
                {
                    "question": "Quelle est la différence entre un changement standard et un changement normal dans ITIL?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Un changement standard est pré-approuvé et à faible risque, un changement normal nécessite une évaluation", "rationale": "C'est la distinction correcte. Les changements standards sont prédéfinis et à faible risque, tandis que les normaux nécessitent une évaluation.", "is_correct": true},
                        {"text": "Un changement standard concerne le matériel, un changement normal le logiciel", "rationale": "La distinction ne se fait pas par type de composant.", "is_correct": false},
                        {"text": "Un changement standard est mineur, un changement normal est majeur", "rationale": "L'importance n'est pas le critère de différenciation.", "is_correct": false},
                        {"text": "Un changement standard est planifié, un changement normal est urgent", "rationale": "Les changements urgents sont une catégorie à part.", "is_correct": false}
                    ],
                    "hint": "Pensez au niveau de pré-approbation et de risque."
                },
                {
                    "question": "Quel est le rôle du gestionnaire de problèmes (Problem Manager) dans ITIL?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Identifier les causes racines des incidents et mettre en place des solutions permanentes", "rationale": "C'est le rôle principal du gestionnaire de problèmes.", "is_correct": true},
                        {"text": "Résoudre les incidents majeurs en priorité", "rationale": "C'est le rôle du gestionnaire d'incidents majeurs.", "is_correct": false},
                        {"text": "Approuver tous les changements dans l'infrastructure", "rationale": "C'est le rôle du comité de gestion des changements (CAB).", "is_correct": false},
                        {"text": "Négocier les SLA avec les clients", "rationale": "C'est le rôle du gestionnaire de niveaux de service.", "is_correct": false}
                    ],
                    "hint": "Pensez à la prévention plutôt qu'à la réaction."
                },
                {
                    "question": "Quel est l'objectif principal de la gestion de la capacité?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "S'assurer que la capacité IT répond aux besoins actuels et futurs au meilleur coût", "rationale": "C'est l'objectif principal de la gestion de la capacité.", "is_correct": true},
                        {"text": "Maximiser l'utilisation des ressources IT", "rationale": "C'est un objectif secondaire, pas le principal.", "is_correct": false},
                        {"text": "Documenter toutes les ressources IT disponibles", "rationale": "C'est partiellement vrai, mais pas l'objectif principal.", "is_correct": false},
                        {"text": "Planifier les achats de nouveaux équipements", "rationale": "C'est une activité, pas l'objectif principal.", "is_correct": false}
                    ],
                    "hint": "Pensez à l'équilibre entre besoins, performance et coûts."
                },
                {
                    "question": "Quelle est la première activité du processus de gestion des changements?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Enregistrement de la demande de changement", "rationale": "L'enregistrement est effectivement la première activité - il formalise la demande.", "is_correct": true},
                        {"text": "Évaluation du risque et de l'impact", "rationale": "L'évaluation vient après l'enregistrement.", "is_correct": false},
                        {"text": "Planification et test du changement", "rationale": "Ces activités viennent plus tard dans le processus.", "is_correct": false},
                        {"text": "Communication aux parties prenantes", "rationale": "La communication intervient à plusieurs étapes, mais pas en premier.", "is_correct": false}
                    ],
                    "hint": "Pensez à la formalisation initiale de la demande."
                },
                {
                    "question": "Quel est le principal avantage d'une base de données de gestion des configurations (CMDB)?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Fournir une source fiable d'information sur les actifs de service et leurs relations", "rationale": "C'est l'avantage principal d'une CMDB - centraliser les informations de configuration.", "is_correct": true},
                        {"text": "Automatiser les processus IT", "rationale": "La CMDB ne permet pas directement l'automatisation.", "is_correct": false},
                        {"text": "Remplacer les inventaires physiques", "rationale": "La CMDB complète mais ne remplace pas les inventaires physiques.", "is_correct": false},
                        {"text": "Gérer les contrats avec les fournisseurs", "rationale": "Ce n'est pas l'objectif d'une CMDB.", "is_correct": false}
                    ],
                    "hint": "Pensez à la visibilité sur les éléments de configuration et leurs liens."
                },
                {
                    "question": "Quelle pratique est responsable de la coordination des activités lors d'un incident majeur?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Gestion des incidents majeurs", "rationale": "C'est effectivement la pratique dédiée aux incidents majeurs.", "is_correct": true},
                        {"text": "Gestion des problèmes", "rationale": "La gestion des problèmes traite des causes racines, pas de la coordination immédiate.", "is_correct": false},
                        {"text": "Gestion des changements", "rationale": "La gestion des changements traite des modifications, pas des incidents.", "is_correct": false},
                        {"text": "Gestion des niveaux de service", "rationale": "La gestion des niveaux de service traite des accords, pas de la gestion opérationnelle.", "is_correct": false}
                    ],
                    "hint": "Pensez à la réponse coordonnée pour les interruptions critiques."
                },
                {
                    "question": "Quel est l'objectif principal de la gestion des versions et déploiements?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "S'assurer que les versions sont déployées de manière contrôlée et cohérente", "rationale": "C'est l'objectif principal - contrôler le déploiement des changements.", "is_correct": true},
                        {"text": "Développer de nouvelles fonctionnalités", "rationale": "Le développement est en amont du déploiement.", "is_correct": false},
                        {"text": "Tester tous les composants logiciels", "rationale": "Les tests sont une activité connexe mais distincte.", "is_correct": false},
                        {"text": "Documenter les procédures techniques", "rationale": "La documentation est un moyen, pas l'objectif principal.", "is_correct": false}
                    ],
                    "hint": "Pensez au contrôle des mises en production."
                },
                {
                    "question": "Quelle est la différence entre un KPI et une métrique dans ITIL?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Un KPI mesure l'atteinte des objectifs, une métrique mesure une activité", "rationale": "C'est la distinction correcte. Les KPI sont liés aux objectifs, les métriques aux activités.", "is_correct": true},
                        {"text": "Un KPI est quantitatif, une métrique est qualitative", "rationale": "Les deux peuvent être quantitatifs ou qualitatifs.", "is_correct": false},
                        {"text": "Un KPI est utilisé en gestion, une métrique en technique", "rationale": "Cette distinction par usage est incorrecte.", "is_correct": false},
                        {"text": "Un KPI est obligatoire, une métrique facultative", "rationale": "La nature obligatoire ou non n'est pas le critère de différenciation.", "is_correct": false}
                    ],
                    "hint": "Pensez au lien avec les objectifs stratégiques."
                },
                {
                    "question": "Quel est le rôle principal du comité consultatif des changements (CAB)?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Évaluer les changements importants et conseiller le gestionnaire des changements", "rationale": "C'est le rôle principal du CAB - évaluer et conseiller sur les changements majeurs.", "is_correct": true},
                        {"text": "Approuver tous les changements dans l'organisation", "rationale": "Le CAB ne fait pas que approuver, et pas tous les changements passent par lui.", "is_correct": false},
                        {"text": "Implémenter les changements techniques complexes", "rationale": "L'implémentation est faite par d'autres équipes.", "is_correct": false},
                        {"text": "Documenter les procédures de changement", "rationale": "Ce n'est pas le rôle principal du CAB.", "is_correct": false}
                    ],
                    "hint": "Pensez à une fonction consultative et d'évaluation."
                },
                {
                    "question": "Quelle pratique est responsable de la gestion des risques liés aux services IT?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Gestion de la continuité des services", "rationale": "La gestion de la continuité des services traite effectivement des risques majeurs aux services.", "is_correct": true},
                        {"text": "Gestion des incidents", "rationale": "La gestion des incidents traite des interruptions, pas de l'ensemble des risques.", "is_correct": false},
                        {"text": "Gestion des configurations", "rationale": "La gestion des configurations traite des actifs, pas des risques.", "is_correct": false},
                        {"text": "Gestion des niveaux de service", "rationale": "La gestion des niveaux de service traite des accords, pas spécifiquement des risques.", "is_correct": false}
                    ],
                    "hint": "Pensez aux plans de reprise après sinistre."
                },
                {
                    "question": "Quel est l'objectif principal de la gestion des demandes de service?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Gérer les demandes des utilisateurs pour des services standard", "rationale": "C'est l'objectif principal - traiter les demandes courantes et standardisées.", "is_correct": true},
                        {"text": "Résoudre les incidents techniques complexes", "rationale": "C'est le rôle de la gestion des incidents ou problèmes.", "is_correct": false},
                        {"text": "Développer de nouveaux services IT", "rationale": "C'est le rôle du développement de services.", "is_correct": false},
                        {"text": "Négocier les contrats avec les clients", "rationale": "C'est le rôle de la gestion des niveaux de service.", "is_correct": false}
                    ],
                    "hint": "Pensez aux demandes courantes comme les réinitialisations de mot de passe."
                },
                {
                    "question": "Quelle est la différence entre un SLA, un OLA et un UC dans ITIL?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "SLA avec clients, OLA entre services internes, UC avec fournisseurs externes", "rationale": "C'est la distinction correcte entre ces trois types d'accords.", "is_correct": true},
                        {"text": "SLA pour le matériel, OLA pour les logiciels, UC pour les services", "rationale": "La distinction ne se fait pas par type de composant.", "is_correct": false},
                        {"text": "SLA est obligatoire, OLA et UC sont facultatifs", "rationale": "La nature obligatoire ou non n'est pas le critère de différenciation.", "is_correct": false},
                        {"text": "SLA pour les grands clients, OLA pour les petits clients, UC pour les partenaires", "rationale": "La taille des clients n'est pas le critère.", "is_correct": false}
                    ],
                    "hint": "Pensez aux parties prenantes concernées par chaque accord."
                },
                {
                    "question": "Quel est le principal avantage de la gestion des problèmes dans ITIL?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Réduire l'impact et la fréquence des incidents en traitant leurs causes racines", "rationale": "C'est l'avantage principal - prévenir plutôt que guérir.", "is_correct": true},
                        {"text": "Fournir des statistiques sur les incidents", "rationale": "C'est un sous-produit, pas l'avantage principal.", "is_correct": false},
                        {"text": "Former le personnel à la résolution d'incidents", "rationale": "La formation est une activité connexe, pas l'avantage principal.", "is_correct": false},
                        {"text": "Automatiser la création de tickets d'incident", "rationale": "L'automatisation n'est pas l'objectif de la gestion des problèmes.", "is_correct": false}
                    ],
                    "hint": "Pensez à la réduction des incidents récurrents."
                },
                {
                    "question": "Quelle pratique est responsable de la gestion financière des services IT?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Gestion financière des services IT", "rationale": "Cette pratique est effectivement dédiée à la gestion financière des services.", "is_correct": true},
                        {"text": "Gestion des fournisseurs", "rationale": "La gestion des fournisseurs traite des relations, pas spécifiquement des finances.", "is_correct": false},
                        {"text": "Gestion des niveaux de service", "rationale": "La gestion des niveaux de service traite des accords, pas des finances.", "is_correct": false},
                        {"text": "Gestion du portefeuille de services", "rationale": "Le portefeuille concerne l'ensemble des services, pas spécifiquement leur financement.", "is_correct": false}
                    ],
                    "hint": "Pensez aux coûts, budgets et facturation des services."
                },
                {
                    "question": "Quel est l'objectif principal de la gestion de la disponibilité?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "S'assurer que les services répondent aux exigences de disponibilité au meilleur coût", "rationale": "C'est l'objectif principal - équilibrer disponibilité et coûts.", "is_correct": true},
                        {"text": "Maximiser la disponibilité de tous les services à tout prix", "rationale": "L'objectif n'est pas la maximisation à tout prix, mais un équilibre.", "is_correct": false},
                        {"text": "Documenter les temps d'indisponibilité", "rationale": "La documentation est un moyen, pas l'objectif.", "is_correct": false},
                        {"text": "Planifier les maintenances matérielles", "rationale": "C'est une activité, pas l'objectif principal.", "is_correct": false}
                    ],
                    "hint": "Pensez à l'équilibre entre disponibilité requise et coûts."
                },
                {
                    "question": "Quelle est la première étape du modèle d'amélioration continue (CSI) dans ITIL?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Quelle est la vision ?", "rationale": "C'est effectivement la première étape du modèle CSI - définir la vision.", "is_correct": true},
                        {"text": "Où sommes-nous maintenant ?", "rationale": "Cette étape vient après la définition de la vision.", "is_correct": false},
                        {"text": "Où voulons-nous être ?", "rationale": "Cette étape vient après l'analyse de la situation actuelle.", "is_correct": false},
                        {"text": "Comment y arriver ?", "rationale": "Cette étape vient après la définition des objectifs.", "is_correct": false}
                    ],
                    "hint": "Pensez à la direction stratégique initiale."
                },
                {
                    "question": "Quelle pratique est responsable de la gestion des actifs logiciels et matériels?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Gestion des actifs de service", "rationale": "Cette pratique est effectivement responsable des actifs tout au long de leur cycle de vie.", "is_correct": true},
                        {"text": "Gestion des configurations", "rationale": "La gestion des configurations traite des relations entre actifs, pas de leur gestion complète.", "is_correct": false},
                        {"text": "Gestion des changements", "rationale": "La gestion des changements traite des modifications, pas des actifs.", "is_correct": false},
                        {"text": "Gestion des versions", "rationale": "La gestion des versions traite des déploiements, pas des actifs.", "is_correct": false}
                    ],
                    "hint": "Pensez au cycle de vie complet des actifs IT."
                },

                // 10 questions difficiles
                {
                    "question": "Quelle est la différence entre un modèle de service et un package de service dans ITIL?",
                    "difficulty": "hard",
                    "answer_options": [
                        {"text": "Le modèle décrit la structure du service, le package inclut tous les éléments nécessaires à sa fourniture", "rationale": "C'est la distinction correcte. Le modèle est la structure, le package est l'ensemble complet pour la livraison.", "is_correct": true},
                        {"text": "Le modèle est technique, le package est commercial", "rationale": "La distinction ne se fait pas entre technique et commercial.", "is_correct": false},
                        {"text": "Le modèle est pour les services internes, le package pour les services externes", "rationale": "La distinction ne se fait pas par public cible.", "is_correct": false},
                        {"text": "Le modèle est un document, le package est un logiciel", "rationale": "Cette distinction par format est incorrecte.", "is_correct": false}
                    ],
                    "hint": "Pensez à la différence entre conception et livraison."
                },
                {
                    "question": "Quel est le rôle du gestionnaire de portefeuille de services dans ITIL?",
                    "difficulty": "hard",
                    "answer_options": [
                        {"text": "Gérer l'ensemble des services tout au long de leur cycle de vie pour maximiser la valeur", "rationale": "C'est le rôle principal - gestion stratégique de l'ensemble des services.", "is_correct": true},
                        {"text": "Négocier les contrats avec les clients", "rationale": "C'est le rôle de la gestion des niveaux de service.", "is_correct": false},
                        {"text": "Superviser les équipes techniques", "rationale": "C'est un rôle opérationnel, pas de portefeuille.", "is_correct": false},
                        {"text": "Développer de nouvelles fonctionnalités", "rationale": "Le développement est une activité distincte.", "is_correct": false}
                    ],
                    "hint": "Pensez à une vision globale et stratégique des services."
                },
                {
                    "question": "Quelle est la séquence correcte des étapes du processus de gestion des problèmes?",
                    "difficulty": "hard",
                    "answer_options": [
                        {"text": "Détection, Enregistrement, Classification, Investigation, Résolution, Clôture", "rationale": "C'est la séquence correcte du processus de gestion des problèmes.", "is_correct": true},
                        {"text": "Enregistrement, Diagnostic, Résolution, Revue, Clôture", "rationale": "Cette séquence omet des étapes importantes comme la classification.", "is_correct": false},
                        {"text": "Identification, Analyse, Solution, Implémentation, Validation", "rationale": "Cette séquence est trop générique et ne correspond pas exactement à ITIL.", "is_correct": false},
                        {"text": "Détection, Évaluation, Correction, Documentation, Communication", "rationale": "Cette séquence est incomplète et incorrecte pour ITIL.", "is_correct": false}
                    ],
                    "hint": "Pensez à la progression logique de l'identification à la résolution."
                },
                {
                    "question": "Quel est l'objectif principal de la gestion de la demande dans ITIL?",
                    "difficulty": "hard",
                    "answer_options": [
                        {"text": "Comprendre, anticiper et influencer la demande des clients pour les services", "rationale": "C'est l'objectif principal - gérer activement la demande plutôt que juste y répondre.", "is_correct": true},
                        {"text": "Répondre rapidement à toutes les demandes des utilisateurs", "rationale": "Trop réactif - la gestion de la demande est plus proactive.", "is_correct": false},
                        {"text": "Prioriser les demandes des clients importants", "rationale": "La priorisation est une partie, pas l'objectif principal.", "is_correct": false},
                        {"text": "Documenter toutes les demandes de service", "rationale": "La documentation est un moyen, pas l'objectif.", "is_correct": false}
                    ],
                    "hint": "Pensez à une approche proactive plutôt que réactive."
                },
                {
                    "question": "Quelle est la différence entre un PIR (Post Implementation Review) et une revue de problème dans ITIL?",
                    "difficulty": "hard",
                    "answer_options": [
                        {"text": "Le PIR évalue un changement implémenté, la revue de problème analyse un problème résolu", "rationale": "C'est la distinction correcte - évaluation vs analyse.", "is_correct": true},
                        {"text": "Le PIR est technique, la revue de problème est commerciale", "rationale": "La distinction ne se fait pas par domaine.", "is_correct": false},
                        {"text": "Le PIR est pour les projets, la revue de problème pour les opérations", "rationale": "Cette distinction par contexte est incorrecte.", "is_correct": false},
                        {"text": "Le PIR est obligatoire, la revue de problème facultative", "rationale": "La nature obligatoire ou non n'est pas le critère.", "is_correct": false}
                    ],
                    "hint": "Pensez au type d'élément évalué dans chaque cas."
                },
                {
                    "question": "Quel est le rôle des accords opérationnels (OLA) dans la gestion des niveaux de service?",
                    "difficulty": "hard",
                    "answer_options": [
                        {"text": "Définir les engagements entre équipes internes pour soutenir les SLA", "rationale": "C'est le rôle principal des OLA - soutenir les SLA par des accords internes.", "is_correct": true},
                        {"text": "Définir les niveaux de service avec les clients", "rationale": "C'est le rôle des SLA, pas des OLA.", "is_correct": false},
                        {"text": "Documenter les procédures techniques", "rationale": "Ce n'est pas l'objectif des OLA.", "is_correct": false},
                        {"text": "Gérer les relations avec les sous-traitants", "rationale": "C'est le rôle des UC (Underpinning Contracts), pas des OLA.", "is_correct": false}
                    ],
                    "hint": "Pensez aux accords entre services internes de l'organisation."
                },
                {
                    "question": "Quelle est la relation entre la gestion des connaissances et le centre de services dans ITIL?",
                    "difficulty": "hard",
                    "answer_options": [
                        {"text": "La base de connaissances soutient le centre de services en fournissant des solutions documentées", "rationale": "C'est la relation correcte - la gestion des connaissances alimente le centre de services.", "is_correct": true},
                        {"text": "Le centre de services gère toute la connaissance de l'organisation", "rationale": "Trop large - la gestion des connaissances est une pratique distincte.", "is_correct": false},
                        {"text": "La gestion des connaissances remplace le centre de services", "rationale": "Incorrect - ce sont des pratiques complémentaires.", "is_correct": false},
                        {"text": "Le centre de services crée toute la documentation technique", "rationale": "Trop restrictif - la documentation vient de multiples sources.", "is_correct": false}
                    ],
                    "hint": "Pensez à comment les connaissances aident à résoudre les incidents."
                },
                {
                    "question": "Quel est l'objectif principal du modèle de maturité des capacités dans ITIL?",
                    "difficulty": "hard",
                    "answer_options": [
                        {"text": "Évaluer et améliorer la maturité des processus de gestion des services", "rationale": "C'est l'objectif principal - mesurer et faire progresser la maturité.", "is_correct": true},
                        {"text": "Certifier les compétences des employés", "rationale": "Le modèle ne sert pas à certifier les personnes.", "is_correct": false},
                        {"text": "Comparer les organisations entre elles", "rationale": "La comparaison externe n'est pas l'objectif principal.", "is_correct": false},
                        {"text": "Documenter toutes les procédures IT", "rationale": "La documentation est un moyen, pas l'objectif du modèle.", "is_correct": false}
                    ],
                    "hint": "Pensez à l'évaluation et à l'amélioration progressive."
                },
                {
                    "question": "Quelle est la différence entre un incident majeur et un incident critique dans ITIL?",
                    "difficulty": "hard",
                    "answer_options": [
                        {"text": "Un incident majeur a un impact élevé, un incident critique menace la survie de l'organisation", "rationale": "C'est la distinction correcte - la criticité va au-delà de l'impact élevé.", "is_correct": true},
                        {"text": "Un incident majeur concerne plusieurs services, un incident critique un seul", "rationale": "La distinction ne se fait pas par nombre de services affectés.", "is_correct": false},
                        {"text": "Un incident majeur est technique, un incident critique commercial", "rationale": "La distinction ne se fait pas par domaine.", "is_correct": false},
                        {"text": "Un incident majeur nécessite plus de ressources, un incident critique plus de communication", "rationale": "Cette distinction par ressources est incorrecte.", "is_correct": false}
                    ],
                    "hint": "Pensez à la gravité potentielle pour l'organisation."
                },
                {
                    "question": "Quel est le rôle des quatre dimensions du service dans ITIL v4?",
                    "difficulty": "hard",
                    "answer_options": [
                        {"text": "Fournir une vue holistique des facteurs à considérer pour la gestion des services", "rationale": "C'est le rôle principal - offrir une perspective complète.", "is_correct": true},
                        {"text": "Classer les services par catégories", "rationale": "Ce n'est pas l'objectif des quatre dimensions.", "is_correct": false},
                        {"text": "Définir les étapes du cycle de vie du service", "rationale": "Les dimensions sont transversales, pas séquentielles.", "is_correct": false},
                        {"text": "Mesurer la performance des équipes", "rationale": "Ce n'est pas l'objectif des quatre dimensions.", "is_correct": false}
                    ],
                    "hint": "Pensez à une approche globale et équilibrée."
                },
                {
                    "question": "Quelle est la relation entre la valeur du service et les coûts/risques dans ITIL?",
                    "difficulty": "hard",
                    "answer_options": [
                        {"text": "La valeur est créée lorsque les bénéfices dépassent les coûts et risques", "rationale": "C'est la relation correcte - la valeur nette vient de cet équilibre.", "is_correct": true},
                        {"text": "La valeur est indépendante des coûts et risques", "rationale": "Incorrect - la valeur est directement liée à cet équilibre.", "is_correct": false},
                        {"text": "Les coûts et risques réduisent toujours la valeur", "rationale": "Trop absolu - c'est l'équilibre qui compte.", "is_correct": false},
                        {"text": "La valeur est égale aux bénéfices moins les coûts, sans considérer les risques", "rationale": "Les risques font partie intégrante de l'équation.", "is_correct": false}
                    ],
                    "hint": "Pensez à une équation où tous ces éléments interagissent."
                },
                {
                    "question": "Quel est l'objectif principal de la pratique 'Amélioration continue' dans ITIL v4?",
                    "difficulty": "hard",
                    "answer_options": [
                        {"text": "S'assurer que les services s'améliorent constamment pour répondre aux besoins changeants", "rationale": "C'est l'objectif principal - une amélioration constante et alignée.", "is_correct": true},
                        {"text": "Corriger tous les défauts des services", "rationale": "Trop restrictif - l'amélioration va au-delà des corrections.", "is_correct": false},
                        {"text": "Documenter toutes les opportunités d'amélioration", "rationale": "La documentation est un moyen, pas l'objectif.", "is_correct": false},
                        {"text": "Former les employés aux nouvelles technologies", "rationale": "La formation est une activité, pas l'objectif principal.", "is_correct": false}
                    ],
                    "hint": "Pensez à un cycle permanent d'évolution et d'adaptation."
                },
                {
                    "question": "Quelle est la différence entre un fournisseur de services et un consommateur de services dans ITIL?",
                    "difficulty": "hard",
                    "answer_options": [
                        {"text": "Le fournisseur fournit le service, le consommateur utilise le service", "rationale": "C'est la distinction de base entre ces deux rôles.", "is_correct": true},
                        {"text": "Le fournisseur est interne, le consommateur externe", "rationale": "Cette distinction par localisation est incorrecte.", "is_correct": false},
                        {"text": "Le fournisseur paie pour le service, le consommateur en bénéficie", "rationale": "C'est l'inverse - le consommateur paie généralement.", "is_correct": false},
                        {"text": "Le fournisseur définit les SLA, le consommateur les OLA", "rationale": "Les OLA sont des accords internes, pas avec le consommateur.", "is_correct": false}
                    ],
                    "hint": "Pensez à la relation entre celui qui offre et celui qui utilise."
                },
                {
                    "question": "Quel est le rôle du système de valeur des services (SVS) dans ITIL v4?",
                    "difficulty": "hard",
                    "answer_options": [
                        {"text": "Décrire comment tous les composants de l'organisation collaborent pour créer de la valeur", "rationale": "C'est le rôle principal du SVS - montrer l'interaction des composants.", "is_correct": true},
                        {"text": "Calculer la valeur financière des services", "rationale": "Trop restrictif - le SVS va au-delà du financier.", "is_correct": false},
                        {"text": "Évaluer la performance des fournisseurs externes", "rationale": "Ce n'est qu'une petite partie du SVS.", "is_correct": false},
                        {"text": "Automatiser la gestion des services", "rationale": "L'automatisation n'est pas l'objectif du SVS.", "is_correct": false}
                    ],
                    "hint": "Pensez à une vue d'ensemble des éléments qui créent de la valeur."
                },
                {
                    "question": "Quelle est la relation entre les pratiques et les processus dans ITIL v4?",
                    "difficulty": "hard",
                    "answer_options": [
                        {"text": "Les pratiques incluent des processus, mais aussi d'autres éléments comme les rôles et les outils", "rationale": "C'est la relation correcte - les pratiques sont plus larges que les processus.", "is_correct": true},
                        {"text": "Les processus remplacent les pratiques dans ITIL v4", "rationale": "Incorrect - les deux concepts coexistent.", "is_correct": false},
                        {"text": "Les pratiques sont techniques, les processus organisationnels", "rationale": "Cette distinction par domaine est incorrecte.", "is_correct": false},
                        {"text": "Les processus sont obligatoires, les pratiques facultatives", "rationale": "La nature obligatoire ou non n'est pas le critère.", "is_correct": false}
                    ],
                    "hint": "Pensez à une relation d'inclusion et de complémentarité."
                }
            ]
        };

        // Fonction pour afficher une question spécifique
        function displayQuestion(index) {
            if (index >= 0 && index < questions.length) {
                const question = questions[index];
                const questionHtml = `
                    <div class="question-card" id="question-card-${index}">
                        <h5>${index + 1}. ${question.question} 
                            <span class="difficulty-badge ${question.difficulty}">
                                ${question.difficulty === 'easy' ? 'Facile' : 
                                 question.difficulty === 'medium' ? 'Moyenne' : 'Difficile'}
                            </span>
                        </h5>
                        <div class="options-container">
                            ${question.answer_options.map((option, optionIndex) => `
                                <div class="form-check answer-option" data-is-correct="${option.is_correct}">
                                    <input class="form-check-input" type="radio" name="currentQuestion" id="question${index}-option${optionIndex}" value="${optionIndex}" ${userAnswers[index] !== null && userAnswers[index].selectedOptionIndex === optionIndex ? 'checked' : ''} ${userAnswers[index] !== null ? 'disabled' : ''}>
                                    <label class="form-check-label" for="question${index}-option${optionIndex}">
                                        ${option.text}
                                    </label>
                                </div>
                            `).join('')}
                        </div>
                        <button class="btn btn-info btn-sm btn-toggle-info mt-3" data-target="hint-${index}">
                            <i class="fas fa-lightbulb me-2"></i> Afficher l'indice
                        </button>
                        <div id="hint-${index}" class="hint">
                            <strong>Indice :</strong> ${question.hint}
                        </div>
                        <button class="btn btn-secondary btn-sm ms-2 btn-toggle-info mt-3" data-target="rationale-${index}">
                            <i class="fas fa-info-circle me-2"></i> Afficher l'explication
                        </button>
                        <div id="rationale-${index}" class="rationale">
                            <strong>Explication détaillée :</strong>
                            <ul>
                                ${question.answer_options.map(option => `
                                    <li>
                                        <strong>${option.text} :</strong> ${option.rationale} ${option.is_correct ? '<i class="fas fa-check-circle text-success ms-2"></i>' : '<i class="fas fa-times-circle text-danger ms-2"></i>'}
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                    </div>
                `;
                quizDisplayDiv.innerHTML = questionHtml;
                updateNavigationButtons();
                addCurrentQuestionEventListeners();

                if (userAnswers[index] !== null) {
                    applyFeedback(index, userAnswers[index].selectedOptionIndex, userAnswers[index].isCorrect);
                    const rationaleDiv = document.getElementById(`rationale-${index}`);
                    if (rationaleDiv) rationaleDiv.classList.add('show-info');
                    const rationaleBtn = quizDisplayDiv.querySelector('button[data-target^="rationale-"]');
                    if (rationaleBtn) rationaleBtn.innerHTML = rationaleBtn.innerHTML.replace('Afficher', 'Masquer');
                }
            }
        }

        function updateNavigationButtons() {
            prevBtn.disabled = currentQuestionIndex === 0;
            nextBtn.disabled = userAnswers[currentQuestionIndex] === null;

            if (currentQuestionIndex === questions.length - 1) {
                nextBtn.textContent = 'Voir le résultat';
            } else {
                nextBtn.textContent = 'Suivant';
            }

            const answeredCount = userAnswers.filter(answer => answer !== null).length;
            currentScoreDisplay.textContent = `Score: ${score} / ${answeredCount}`;
            questionCountDisplay.textContent = `Question: ${currentQuestionIndex + 1} / ${questions.length}`;

            const progressPercentage = ((currentQuestionIndex + 1) / questions.length) * 100;
            questionProgressBar.style.width = `${progressPercentage}%`;
            questionProgressBar.setAttribute('aria-valuenow', progressPercentage);
        }

        function applyFeedback(questionIndex, selectedOptionIndex, isCorrect) {
            const optionsContainer = quizDisplayDiv.querySelector('.options-container');
            if (!optionsContainer) return;

            optionsContainer.querySelectorAll('.answer-option').forEach((optionElement, idx) => {
                optionElement.classList.remove('correct', 'incorrect');

                if (questions[questionIndex].answer_options[idx].is_correct) {
                    optionElement.classList.add('correct');
                }
                if (idx === selectedOptionIndex && !isCorrect) {
                    optionElement.classList.add('incorrect');
                }
            });
        }

        function addCurrentQuestionEventListeners() {
            const currentQuestionCard = document.getElementById(`question-card-${currentQuestionIndex}`);
            const optionsContainer = currentQuestionCard.querySelector('.options-container');

            optionsContainer.addEventListener('change', function(event) {
                if (event.target.type === 'radio') {
                    const selectedOption = event.target;
                    const selectedOptionIndex = parseInt(selectedOption.value);
                    const isCorrect = questions[currentQuestionIndex].answer_options[selectedOptionIndex].is_correct;
                    
                    if (userAnswers[currentQuestionIndex] === null) {
                        if (isCorrect) {
                            score++;
                        }
                        userAnswers[currentQuestionIndex] = {
                            selectedOptionIndex: selectedOptionIndex,
                            isCorrect: isCorrect
                        };
                    }

                    optionsContainer.querySelectorAll('input[type="radio"]').forEach(radio => {
                        radio.disabled = true;
                    });

                    applyFeedback(currentQuestionIndex, selectedOptionIndex, isCorrect);

                    const rationaleDiv = document.getElementById(`rationale-${currentQuestionIndex}`);
                    if (rationaleDiv) rationaleDiv.classList.add('show-info');
                    
                    const rationaleBtn = quizDisplayDiv.querySelector('button[data-target^="rationale-"]');
                    if (rationaleBtn) rationaleBtn.innerHTML = rationaleBtn.innerHTML.replace('Afficher', 'Masquer');

                    updateNavigationButtons();
                }
            });

            document.querySelectorAll('.btn-toggle-info').forEach(button => {
                button.addEventListener('click', function() {
                    const targetId = this.dataset.target;
                    const targetElement = document.getElementById(targetId);
                    targetElement.classList.toggle('show-info');
                    
                    if (targetElement.classList.contains('show-info')) {
                        this.innerHTML = this.innerHTML.replace('Afficher', 'Masquer');
                    } else {
                        this.innerHTML = this.innerHTML.replace('Masquer', 'Afficher');
                    }
                });
            });
        }

        function nextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                displayQuestion(currentQuestionIndex);
            } else {
                displayResults();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion(currentQuestionIndex);
            }
        }

        function displayResults() {
            quizNavigationDiv.style.display = 'none';

            const percentage = (score / questions.length) * 100;
            let recommendationsHtml = '';
            let scoreColor = '';

            if (percentage >= 80) {
                scoreColor = '#28a745';
                recommendationsHtml = `
                    <h4>Félicitations !</h4>
                    <p>Votre score de ${percentage.toFixed(2)}% est excellent.</p>
                    <ul>
                        <li>Continuez à réviser pour maintenir votre niveau.</li>
                        <li>Consultez les explications des questions pour renforcer vos connaissances.</li>
                        <li>Pensez à passer l'examen blanc officiel pour vous préparer à la certification.</li>
                    </ul>
                `;
            } else if (percentage >= 60) {
                scoreColor = '#ffc107';
                recommendationsHtml = `
                    <h4>Bien joué !</h4>
                    <p>Votre score de ${percentage.toFixed(2)}% est correct, mais peut être amélioré.</p>
                    <ul>
                        <li>Revoyez les concepts que vous maîtrisez moins bien en consultant les explications.</li>
                        <li>Concentrez-vous sur les questions difficiles que vous avez manquées.</li>
                        <li>Relisez les chapitres correspondants dans le guide ITIL.</li>
                    </ul>
                `;
            } else if (percentage >= 40) {
                scoreColor = '#fd7e14';
                recommendationsHtml = `
                    <h4>Vous n'avez pas réussi.</h4>
                    <p>Votre score de ${percentage.toFixed(2)}% indique que des efforts supplémentaires sont nécessaires.</p>
                    <ul>
                        <li>Revoyez attentivement les principes fondamentaux d'ITIL.</li>
                        <li>Étudiez les explications détaillées pour chaque question.</li>
                        <li>Consacrez plus de temps à l'étude des processus et pratiques clés.</li>
                    </ul>
                `;
            } else {
                scoreColor = '#dc3545';
                recommendationsHtml = `
                    <h4>Résultat insuffisant.</h4>
                    <p>Votre score de ${percentage.toFixed(2)}% est très faible.</p>
                    <ul>
                        <li>Reprenez les bases d'ITIL depuis le début.</li>
                        <li>Étudiez systématiquement toutes les explications.</li>
                        <li>Considérez une formation préparatoire avant de tenter l'examen.</li>
                    </ul>
                `;
            }

            finalScoreCorrectSpan.textContent = score;
            finalScoreTotalSpan.textContent = questions.length;
            finalScorePercentage.textContent = `${percentage.toFixed(2)}%`;
            finalScorePercentage.style.color = scoreColor;
            finalRecommendationsDiv.innerHTML = recommendationsHtml;

            resultsModal.show();
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = new Array(questions.length).fill(null);
            quizNavigationDiv.style.display = 'flex';
            resultsModal.hide();
            displayQuestion(currentQuestionIndex);
        }

        // Attach navigation button handlers
        nextBtn.addEventListener('click', nextQuestion);
        prevBtn.addEventListener('click', previousQuestion);
        restartQuizBtnModal.addEventListener('click', restartQuiz);

        // Initial load of the quiz
        document.addEventListener('DOMContentLoaded', () => {
            loadingSpinner.style.display = 'none'; 
            questions = quizData.questions;
            displayQuestion(currentQuestionIndex);
        });
    </script>
</body>
</html>