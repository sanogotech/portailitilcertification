<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz de Certification ITIL Fondation - Examen Blanc</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Styles CSS personnalisés pour le quiz ITIL */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #e8f0f7;
            color: #2c3e50;
            padding-top: 30px;
            padding-bottom: 30px;
        }
        .quiz-container {
            max-width: 950px;
            margin: auto;
            background-color: #ffffff;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.18);
            animation: fadeIn 1s ease-out;
        }
        .quiz-header {
            text-align: center;
            margin-bottom: 40px;
            color: #3498db;
            font-weight: 700;
            font-size: 2.8rem;
            position: relative;
            padding-bottom: 18px;
        }
        .quiz-header::after {
            content: '';
            position: absolute;
            left: 50%;
            bottom: 0;
            transform: translateX(-50%);
            width: 120px;
            height: 5px;
            background-color: #2c3e50;
            border-radius: 3px;
        }

        .score-progress-container {
            display: flex;
            flex-direction: column;
            margin-bottom: 25px;
            padding: 15px 25px;
            background-color: #f0f8ff;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            font-weight: 600;
            color: #2c3e50;
        }
        .score-display, .question-progress-display {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            margin-bottom: 10px;
        }
        .question-progress-display {
            margin-bottom: 0;
        }
        .progress {
            height: 15px;
            border-radius: 10px;
            background-color: #e9ecef;
            flex-grow: 1;
            margin-left: 20px;
        }
        .progress-bar {
            background-color: #3498db;
            border-radius: 10px;
            transition: width 0.5s ease-in-out;
        }

        .question-card {
            margin-bottom: 35px;
            border: none;
            border-radius: 12px;
            padding: 30px;
            background-color: #fefefe;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .question-card:hover {
            transform: translateY(-7px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        .question-card h5 {
            margin-bottom: 25px;
            color: #2c3e50;
            font-weight: 600;
            font-size: 1.4rem;
            line-height: 1.5;
        }
        .answer-option {
            margin-bottom: 15px;
            padding: 15px 20px;
            border: 1px solid #d0d9e2;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            background-color: #f8fbfd;
        }
        .answer-option:hover {
            background-color: #eef7ff;
            border-color: #9ac7ed;
        }
        .answer-option input[type="radio"] {
            margin-right: 18px;
            transform: scale(1.3);
            cursor: pointer;
        }
        .answer-option label {
            cursor: pointer;
            flex-grow: 1;
        }

        /* Styles pour les retours (correct/incorrect) en mode apprentissage */
        .answer-option.correct {
            background-color: #d4edda;
            border-color: #28a745;
            font-weight: bold;
            color: #155724;
            animation: pulseGreen 0.5s ease-out;
        }
        .answer-option.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545;
            font-weight: bold;
            color: #721c24;
            animation: shakeRed 0.5s ease-out;
        }
        .rationale {
            margin-top: 20px;
            padding: 20px;
            background-color: #e9eff5;
            border-left: 6px solid #607d8b;
            border-radius: 8px;
            font-size: 1em;
            color: #455a64;
            display: none;
            animation: slideInUp 0.4s ease-out;
        }
        .rationale ul {
            list-style-type: none;
            padding-left: 0;
            margin-bottom: 0;
        }
        .rationale li {
            margin-bottom: 8px;
            line-height: 1.4;
        }
        .rationale li:last-child {
            margin-bottom: 0;
        }

        .hint {
            margin-top: 20px;
            padding: 15px;
            background-color: #fff8e1;
            border-left: 6px solid #ffb300;
            border-radius: 8px;
            font-size: 0.95em;
            color: #a1887f;
            display: none;
            animation: slideInUp 0.4s ease-out;
        }
        .show-info {
            display: block;
        }
        .btn-toggle-info {
            margin-top: 20px;
            font-size: 0.95em;
            padding: 10px 20px;
            border-radius: 6px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .btn-toggle-info:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        /* Styles pour le pop-up de résultats (modal) */
        .results-modal .modal-content {
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            padding: 20px;
            text-align: center;
        }
        .results-modal .modal-header {
            border-bottom: none;
            padding-bottom: 0;
            justify-content: center;
        }
        .results-modal .modal-title {
            font-size: 2.5rem;
            font-weight: bold;
            color: #2c3e50;
        }
        .results-modal .modal-body {
            padding-top: 20px;
            padding-bottom: 20px;
        }
        .results-modal .score-text {
            font-size: 1.8rem;
            color: #495057;
            margin-bottom: 15px;
        }
        .results-modal .score-percentage {
            font-size: 4rem;
            font-weight: bold;
            margin-bottom: 30px;
        }
        .results-modal .recommendations {
            margin-top: 20px;
            padding: 20px;
            background-color: #e9eff5;
            border-radius: 10px;
            border-left: 6px solid #3498db;
            text-align: left;
        }
        .results-modal .recommendations h4 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        .results-modal .recommendations ul {
            list-style-type: disc;
            padding-left: 25px;
        }
        .results-modal .recommendations li {
            margin-bottom: 8px;
            color: #495057;
        }
        .results-modal .modal-footer {
            border-top: none;
            padding-top: 0;
            justify-content: center;
        }
        .results-modal #restart-quiz-btn-modal {
            padding: 12px 30px;
            font-size: 1.2rem;
            border-radius: 8px;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes pulseGreen {
            0% { transform: scale(1); }
            50% { transform: scale(1.005); }
            100% { transform: scale(1); }
        }
        @keyframes shakeRed {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-8px); }
            40%, 80% { transform: translateX(8px); }
        }
        
        /* Badges de difficulté */
        .difficulty-badge {
            font-size: 0.8rem;
            padding: 3px 8px;
            border-radius: 10px;
            margin-left: 10px;
        }
        .easy {
            background-color: #28a745;
            color: white;
        }
        .medium {
            background-color: #ffc107;
            color: #212529;
        }
        .hard {
            background-color: #dc3545;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container quiz-container">
        <h2 class="quiz-header">Quiz de Certification ITIL Fondation</h2>
        <p class="text-center text-muted mb-5">Testez vos connaissances sur les concepts clés d'ITIL v4. Chaque question offre un indice et une explication détaillée.</p>

        <div class="score-progress-container">
            <div class="score-display">
                <span id="current-score-display">Score: 0 / 0</span>
            </div>
            <div class="question-progress-display">
                <span id="question-count-display">Question: 1 / 40</span>
                <div class="progress">
                    <div id="question-progress-bar" class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
        </div>

        <div id="quiz-display">
            <div class="text-center my-5" id="loading-spinner">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Chargement des questions...</span>
                </div>
                <p class="mt-2 text-muted">Chargement des questions du quiz...</p>
            </div>
        </div>

        <div class="d-flex justify-content-between mt-4" id="quiz-navigation">
            <button id="prev-btn" class="btn btn-primary" disabled>
                <i class="fas fa-arrow-left me-2"></i> Précédent
            </button>
            <button id="next-btn" class="btn btn-primary" disabled>
                Suivant <i class="fas fa-arrow-right ms-2"></i>
            </button>
        </div>
    </div>

    <div class="modal fade results-modal" id="resultsModal" tabindex="-1" aria-labelledby="resultsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="resultsModalLabel">Résultats du Quiz</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p class="score-text">Vous avez répondu correctement à <span id="final-score-correct">0</span> questions sur <span id="final-score-total">0</span>.</p>
                    <p class="score-percentage" id="final-score-percentage" style="color: #28a745;">0%</p>
                    <div class="recommendations" id="final-recommendations">
                        </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="restart-quiz-btn-modal">
                        <i class="fas fa-redo me-2"></i> Recommencer le quiz
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const quizDisplayDiv = document.getElementById('quiz-display');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const loadingSpinner = document.getElementById('loading-spinner');
        const quizNavigationDiv = document.getElementById('quiz-navigation');
        const currentScoreDisplay = document.getElementById('current-score-display');
        const questionCountDisplay = document.getElementById('question-count-display');
        const questionProgressBar = document.getElementById('question-progress-bar');

        // Modal elements
        const resultsModal = new bootstrap.Modal(document.getElementById('resultsModal'));
        const finalScoreCorrectSpan = document.getElementById('final-score-correct');
        const finalScoreTotalSpan = document.getElementById('final-score-total');
        const finalScorePercentage = document.getElementById('final-score-percentage');
        const finalRecommendationsDiv = document.getElementById('final-recommendations');
        const restartQuizBtnModal = document.getElementById('restart-quiz-btn-modal');

        let currentQuestionIndex = 0;
        let questions = [];
        let score = 0;
        let userAnswers = new Array(40).fill(null);

        // Données du quiz ITIL Fondation (40 questions)
        const quizData = {
            "title": "Quiz de Certification ITIL Fondation - Examen Blanc 1",
            "questions": [
                {
                    "question": "Quelle est la pratique qui permet de déplacer de nouveaux matériels, logiciels ou tout autre composant dans l’environnement de production ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Contrôle des changements", "is_correct": false},
                        {"text": "Gestion des versions", "is_correct": false},
                        {"text": "Gestion des mises en production", "is_correct": false},
                        {"text": "Gestion des déploiements", "is_correct": true}
                    ],
                    "rationale": "La gestion des déploiements permet de déplacer des composants vers les environnements de production.",
                    "hint": "Pensez au processus de mise en service de nouveaux éléments."
                },
                {
                    "question": "Quelle pratique est responsable de la gestion des questions, demandes et incidents des utilisateurs ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Centre de services", "is_correct": true},
                        {"text": "Gestion des incidents", "is_correct": false},
                        {"text": "Gestion des demandes de service", "is_correct": false},
                        {"text": "Contrôle des changements", "is_correct": false}
                    ],
                    "rationale": "Le centre de services est le point de contact unique pour les utilisateurs.",
                    "hint": "Pensez au point d'entrée unique pour toutes les interactions utilisateurs."
                },
                {
                    "question": "Quelle pratique inclut l'identification des métriques qui reflètent l'expérience réelle du client ?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Gestion des incidents", "is_correct": false},
                        {"text": "Centre de services", "is_correct": false},
                        {"text": "Gestion des niveaux de service", "is_correct": true},
                        {"text": "Gestion des fournisseurs", "is_correct": false}
                    ],
                    "rationale": "Elle permet de mesurer la qualité de service perçue.",
                    "hint": "Cette pratique est liée aux accords de service."
                },
                {
                    "question": "Quelle est l’utilité principale du calendrier des changements ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Créer des changements urgents", "is_correct": false},
                        {"text": "Fournir une structure d’autorisation", "is_correct": false},
                        {"text": "Planifier les changements et éviter les conflits", "is_correct": true},
                        {"text": "Affecter des ressources aux changements", "is_correct": false}
                    ],
                    "rationale": "Il permet de visualiser les changements prévus pour éviter les collisions.",
                    "hint": "Pensez à un outil de planification pour les modifications."
                },
                {
                    "question": "Quelle dimension du management des services est axée sur les activités de l’organisation et leur coordination ?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Organisation et personnes", "is_correct": false},
                        {"text": "Information et technologie", "is_correct": false},
                        {"text": "Partenaires et fournisseurs", "is_correct": false},
                        {"text": "Flux de valeur et processus", "is_correct": true}
                    ],
                    "rationale": "Elle décrit comment les différentes parties de l’organisation travaillent ensemble.",
                    "hint": "Cette dimension concerne la manière dont le travail est effectué."
                },
                {
                    "question": "Pourquoi catégoriser les incidents ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Diriger vers le groupe de support approprié", "is_correct": true},
                        {"text": "S'assurer qu'ils sont résolus dans les délais", "is_correct": false},
                        {"text": "Faciliter l'escalade", "is_correct": false},
                        {"text": "Faciliter la documentation", "is_correct": false}
                    ],
                    "rationale": "Cela optimise leur prise en charge.",
                    "hint": "Pensez à la meilleure façon d'acheminer un problème."
                },
                {
                    "question": "Un service facilite la co-création de valeur en facilitant [...]",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "l'optimisation des coûts", "is_correct": false},
                        {"text": "les résultats", "is_correct": true},
                        {"text": "les sorties", "is_correct": false},
                        {"text": "les tâches", "is_correct": false}
                    ],
                    "rationale": "Un service aide à atteindre des résultats désirés sans gérer les coûts ou risques.",
                    "hint": "Le but ultime de tout service pour le client."
                },
                {
                    "question": "Quelle est la recommandation liée à l’amélioration continue ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Avoir une équipe dédiée", "is_correct": true},
                        {"text": "Éviter l’utilisation d’outils", "is_correct": false},
                        {"text": "Réagir uniquement aux erreurs", "is_correct": false},
                        {"text": "S’appuyer uniquement sur le centre de services", "is_correct": false}
                    ],
                    "rationale": "Une équipe dédiée favorise la culture d’amélioration.",
                    "hint": "Pensez à la structure nécessaire pour une amélioration constante."
                },
                {
                    "question": "Quel est l’un des avantages d’un outil ITSM dans la gestion des incidents ?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Accès aux enregistrements financiers", "is_correct": false},
                        {"text": "Appariement automatique avec des problèmes connus", "is_correct": true},
                        {"text": "Création d’événements", "is_correct": false},
                        {"text": "Accès direct aux fournisseurs", "is_correct": false}
                    ],
                    "rationale": "Cela accélère la résolution des incidents.",
                    "hint": "Pensez à la rapidité de résolution des problèmes récurrents."
                },
                {
                    "question": "Qui peut soumettre une demande de service ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "L'utilisateur ou son représentant", "is_correct": true},
                        {"text": "Le technicien IT", "is_correct": false},
                        {"text": "Le fournisseur de service", "is_correct": false},
                        {"text": "Le gestionnaire de changements", "is_correct": false}
                    ],
                    "rationale": "Toute personne bénéficiant du service.",
                    "hint": "C'est la personne qui utilise le service."
                },
                {
                    "question": "Quelle pratique fournit un point de contact unique pour les utilisateurs ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Gestion des incidents", "is_correct": false},
                        {"text": "Contrôle des changements", "is_correct": false},
                        {"text": "Centre de services", "is_correct": true},
                        {"text": "Gestion des demandes de service", "is_correct": false}
                    ],
                    "rationale": "Le centre de services est le point d'entrée unique pour tous les utilisateurs.",
                    "hint": "Déjà vu? C'est un concept fondamental."
                },
                {
                    "question": "Quel principe directeur recommande de prendre en compte les quatre dimensions de la gestion des services ?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Penser et travailler de façon holistique", "is_correct": true},
                        {"text": "Avancer par itérations avec des retours", "is_correct": false},
                        {"text": "Privilégier la valeur", "is_correct": false},
                        {"text": "Opter pour la simplicité et rester pratique", "is_correct": false}
                    ],
                    "rationale": "Il vise à coordonner tous les aspects de l’organisation.",
                    "hint": "Ce principe encourage une vue d'ensemble."
                },
                {
                    "question": "Quelle option correspond à une demande de service ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Une demande de changement", "is_correct": false},
                        {"text": "Une demande d'un élément courant du service", "is_correct": true},
                        {"text": "Une interruption de service", "is_correct": false},
                        {"text": "Une enquête sur un problème", "is_correct": false}
                    ],
                    "rationale": "Une demande de service porte sur un élément standard, comme un accès ou un équipement.",
                    "hint": "Pensez à des requêtes routinières et pré-approuvées."
                },
                {
                    "question": "Quelle pratique est de la responsabilité de chacun dans l'organisation ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Gestion des niveaux de service", "is_correct": false},
                        {"text": "Contrôle des changements", "is_correct": false},
                        {"text": "Gestion des problèmes", "is_correct": false},
                        {"text": "Amélioration continue", "is_correct": true}
                    ],
                    "rationale": "Chaque employé contribue à l'amélioration continue.",
                    "hint": "C'est un effort collectif pour progresser."
                },
                {
                    "question": "Quel est le but de la gestion de la sécurité de l'information ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Stocker les données", "is_correct": false},
                        {"text": "Fournir des données", "is_correct": false},
                        {"text": "Vérifier les données", "is_correct": false},
                        {"text": "Protéger les informations", "is_correct": true}
                    ],
                    "rationale": "Elle couvre confidentialité, intégrité, disponibilité, non-répudiation.",
                    "hint": "L'objectif principal est la protection des données."
                },
                {
                    "question": "Quel principe recommande de collecter des données avant d'agir ?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Privilégier la valeur", "is_correct": false},
                        {"text": "Commencer là où vous êtes", "is_correct": true},
                        {"text": "Collaborer et promouvoir la visibilité", "is_correct": false},
                        {"text": "Penser et travailler de façon holistique", "is_correct": false}
                    ],
                    "rationale": "Il s'agit d'évaluer l'état actuel avant toute initiative.",
                    "hint": "Ne pas agir à l'aveugle."
                },
                {
                    "question": "Quels sont les deux types de demandes de service les plus courants dans un centre de services ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Demande de rapport et demande de changement", "is_correct": false},
                        {"text": "Demande d’information et demande de logiciel", "is_correct": false},
                        {"text": "Demande de fonctionnalité et demande de support", "is_correct": false},
                        {"text": "Demande d’accès et demande d’information", "is_correct": true}
                    ],
                    "rationale": "Accès (mot de passe, compte) et information (comment faire, statut) sont très fréquents.",
                    "hint": "Pensez aux requêtes simples et fréquentes des utilisateurs."
                },
                {
                    "question": "Quel est le but de la gestion des problèmes ?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Éviter la récurrence des incidents", "is_correct": true},
                        {"text": "Restaurer les services rapidement", "is_correct": false},
                        {"text": "Gérer les changements planifiés", "is_correct": false},
                        {"text": "Documenter les actifs IT", "is_correct": false}
                    ],
                    "rationale": "La gestion des problèmes cherche à identifier et résoudre les causes racines pour éviter que les incidents ne se reproduisent.",
                    "hint": "C'est une approche proactive par rapport aux incidents."
                },
                {
                    "question": "Quelle dimension du management des services comprend les partenaires, les fournisseurs et les accords associés ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Organisation et personnes", "is_correct": false},
                        {"text": "Information et technologie", "is_correct": false},
                        {"text": "Partenaires et fournisseurs", "is_correct": true},
                        {"text": "Flux de valeur et processus", "is_correct": false}
                    ],
                    "rationale": "Cette dimension traite de la façon dont l'organisation interagit avec des tiers.",
                    "hint": "Le nom de la dimension est explicite."
                },
                {
                    "question": "Quel est le but de la gestion des demandes de service ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Gérer tous les changements", "is_correct": false},
                        {"text": "Fournir les éléments courants du service", "is_correct": true},
                        {"text": "Résoudre les incidents complexes", "is_correct": false},
                        {"text": "Définir les niveaux de service", "is_correct": false}
                    ],
                    "rationale": "Elle assure la livraison efficace des services de routine.",
                    "hint": "Il s'agit de la mise à disposition d'éléments pré-définis."
                },
                {
                    "question": "Quel est le but principal de l’amélioration continue ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Augmenter l'efficacité des services", "is_correct": true},
                        {"text": "Réduire les coûts IT", "is_correct": false},
                        {"text": "Installer de nouveaux logiciels", "is_correct": false},
                        {"text": "Gérer les contrats fournisseurs", "is_correct": false}
                    ],
                    "rationale": "L'amélioration continue vise à améliorer constamment les produits, services et pratiques.",
                    "hint": "C'est un objectif général de progression."
                },
                {
                    "question": "Quel est le principe directeur qui met l'accent sur la création de valeur pour les parties prenantes ?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Commencer là où vous êtes", "is_correct": false},
                        {"text": "Avancer par itérations avec des retours", "is_correct": false},
                        {"text": "Privilégier la valeur", "is_correct": true},
                        {"text": "Collaborer et promouvoir la visibilité", "is_correct": false}
                    ],
                    "rationale": "Le principe “Privilégier la valeur” est fondamental à ITIL et met l’accent sur la compréhension et la création de valeur pour les consommateurs de services et autres parties prenantes.",
                    "hint": "Le nom du principe est assez explicite."
                },
                {
                    "question": "Quels sont les deux types d’améliorations possibles dans l’amélioration continue ?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Opérationnelles et financières", "is_correct": false},
                        {"text": "Techniques et humaines", "is_correct": false},
                        {"text": "Progressives et transformatives", "is_correct": true},
                        {"text": "Internes et externes", "is_correct": false}
                    ],
                    "rationale": "Les améliorations peuvent être des petits pas progressifs ou des changements majeurs transformatifs.",
                    "hint": "Pensez à l'échelle des changements."
                },
                {
                    "question": "Quel est l’un des buts du principe directeur “Collaborer et promouvoir la visibilité” ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Réduire les communications", "is_correct": false},
                        {"text": "Augmenter la bureaucratie", "is_correct": false},
                        {"text": "Améliorer la confiance et la compréhension mutuelle", "is_correct": true},
                        {"text": "Travailler de manière isolée", "is_correct": false}
                    ],
                    "rationale": "La collaboration et la visibilité favorisent une meilleure compréhension et un environnement de confiance.",
                    "hint": "Pensez à l'importance de l'ouverture et du partage."
                },
                {
                    "question": "Quels sont les trois principaux éléments du système de valeur du service (SVS) ITIL ?",
                    "difficulty": "hard",
                    "answer_options": [
                        {"text": "Processus, outils et personnes", "is_correct": false},
                        {"text": "Opportunité/Demande, Principe directeur et Gouvernance", "is_correct": false},
                        {"text": "Principes directeurs, Gouvernance et Chaîne de valeur du service", "is_correct": true},
                        {"text": "Services, produits et ressources", "is_correct": false}
                    ],
                    "rationale": "Le SVS se compose des Principes directeurs, de la Gouvernance, de la Chaîne de valeur du service, des Pratiques et de l’Amélioration continue.",
                    "hint": "Pensez aux composants fondamentaux qui permettent à une organisation de créer de la valeur."
                },
                {
                    "question": "Quel est le but de la pratique de gestion des risques ?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Éliminer tous les risques", "is_correct": false},
                        {"text": "Identifier, évaluer et contrôler les risques", "is_correct": true},
                        {"text": "Augmenter les risques pour l'innovation", "is_correct": false},
                        {"text": "Ignorer les risques mineurs", "is_correct": false}
                    ],
                    "rationale": "La gestion des risques vise à comprendre et à gérer l'incertitude.",
                    "hint": "C'est une pratique essentielle pour la stabilité et la résilience."
                },
                {
                    "question": "Quel est le principal objectif de la chaîne de valeur du service ITIL ?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Fournir des rapports détaillés", "is_correct": false},
                        {"text": "Définir les processus techniques", "is_correct": false},
                        {"text": "Convertir la demande en valeur", "is_correct": true},
                        {"text": "Gérer les ressources humaines", "is_correct": false}
                    ],
                    "rationale": "La chaîne de valeur du service est un modèle opérationnel générique qui convertit la demande en valeur.",
                    "hint": "C'est le cœur du système de valeur du service."
                },
                {
                    "question": "Dans le système de valeur du service ITIL (SVS), que représentent les Pratiques ?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Des ensembles d'outils IT", "is_correct": false},
                        {"text": "Des ressources humaines dédiées", "is_correct": false},
                        {"text": "Des ensembles de ressources organisationnelles conçues pour effectuer un travail ou atteindre un objectif", "is_correct": true},
                        {"text": "Des modèles financiers pour l'investissement", "is_correct": false}
                    ],
                    "rationale": "Les pratiques sont des ensembles de ressources conçues pour accomplir un travail spécifique.",
                    "hint": "Pensez aux capacités et activités d'une organisation."
                },
                {
                    "question": "Quel principe directeur insiste sur le fait de commencer par une approche simple et d'ajouter de la complexité si nécessaire ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Privilégier la valeur", "is_correct": false},
                        {"text": "Commencer là où vous êtes", "is_correct": false},
                        {"text": "Avancer par itérations avec des retours", "is_correct": false},
                        {"text": "Opter pour la simplicité et rester pratique", "is_correct": true}
                    ],
                    "rationale": "Ce principe met l’accent sur l’importance de faire ce qui est le plus simple et le plus efficace pour atteindre l’objectif.",
                    "hint": "Évitez la sur-ingénierie."
                },
                {
                    "question": "Quelle est la différence entre un problème et un incident ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Un problème est une cause inconnue d'un ou plusieurs incidents, un incident est une interruption ou une dégradation de service", "is_correct": true},
                        {"text": "Un problème est toujours plus grave qu'un incident", "is_correct": false},
                        {"text": "Un incident est planifié, un problème est inattendu", "is_correct": false},
                        {"text": "Un problème est résolu par les utilisateurs, un incident par le support IT", "is_correct": false}
                    ],
                    "rationale": "Un incident est une interruption, un problème est la cause sous-jacente inconnue d'incidents.",
                    "hint": "Un incident est le 'quoi', un problème est le 'pourquoi'."
                },
                {
                    "question": "Laquelle des activités suivantes est incluse dans la pratique de gestion des incidents ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Identifier les causes racines des erreurs", "is_correct": false},
                        {"text": "Mettre à jour le calendrier des changements", "is_correct": false},
                        {"text": "Résoudre les interruptions de service", "is_correct": true},
                        {"text": "Négocier des accords de niveau de service", "is_correct": false}
                    ],
                    "rationale": "La gestion des incidents vise à restaurer le service normal aussi rapidement que possible.",
                    "hint": "Pensez à l'action immédiate en cas de panne."
                },
                {
                    "question": "Laquelle des affirmations suivantes concernant le principe directeur « Privilégier la valeur » est VRAIE ?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Il se concentre sur l'optimisation des coûts pour le fournisseur de services", "is_correct": false},
                        {"text": "Il met l'accent sur les sorties (outputs) plutôt que sur les résultats (outcomes)", "is_correct": false},
                        {"text": "Il implique de comprendre comment le service crée de la valeur pour le consommateur", "is_correct": true},
                        {"text": "Il suggère de toujours créer une nouvelle solution pour chaque demande", "is_correct": false}
                    ],
                    "rationale": "Le principe met l'accent sur la compréhension des résultats que le service aide à atteindre.",
                    "hint": "Concentrez-vous sur ce qui importe le plus pour le client."
                },
                {
                    "question": "Quelle dimension du management des services comprend les rôles, les responsabilités et les structures organisationnelles ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Information et technologie", "is_correct": false},
                        {"text": "Flux de valeur et processus", "is_correct": false},
                        {"text": "Organisation et personnes", "is_correct": true},
                        {"text": "Partenaires et fournisseurs", "is_correct": false}
                    ],
                    "rationale": "Cette dimension se concentre sur la structure humaine et la culture.",
                    "hint": "Pensez aux aspects humains de l'organisation."
                },
                {
                    "question": "Quel élément NE fait PAS partie d’\"Information et technologie\" ?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Sécurité et conformité", "is_correct": false},
                        {"text": "Systèmes de communication", "is_correct": false},
                        {"text": "Systèmes d’inventaire", "is_correct": false},
                        {"text": "Rôles et responsabilités", "is_correct": true}
                    ],
                    "rationale": "Ils relèvent d’\"Organisation et personnes\".",
                    "hint": "Cette option n'est pas technologique."
                },
                {
                    "question": "Pratiques impliquées dans la résolution de problèmes ?",
                    "difficulty": "hard",
                    "answer_options": [
                        {"text": "Amélioration continue + Gestion des demandes", "is_correct": false},
                        {"text": "Niveaux de service + Demandes", "is_correct": false},
                        {"text": "Niveaux de service + Changements", "is_correct": false},
                        {"text": "Amélioration continue + Changements", "is_correct": true}
                    ],
                    "rationale": "Ces deux pratiques pilotent les résolutions.",
                    "hint": "Pensez aux pratiques qui adressent les causes profondes et les modifications nécessaires."
                },
                {
                    "question": "Élément clé du principe “Opter pour la simplicité” ?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Créer une solution pour chaque exception", "is_correct": false},
                        {"text": "Comprendre comment chaque élément crée de la valeur", "is_correct": true},
                        {"text": "Ignorer les conflits", "is_correct": false},
                        {"text": "Commencer complexe", "is_correct": false}
                    ],
                    "rationale": "Simplicité rime avec pertinence.",
                    "hint": "Moins c'est mieux, mais sans sacrifier l'utilité."
                },
                {
                    "question": "Première étape pour “Privilégier la valeur” ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Identifier résultats", "is_correct": false},
                        {"text": "Identifier partenaires", "is_correct": false},
                        {"text": "Déterminer le consommateur", "is_correct": true},
                        {"text": "Évaluer le coût", "is_correct": false}
                    ],
                    "rationale": "Cibler le bon bénéficiaire.",
                    "hint": "Qui bénéficiera de la valeur ?"
                },
                {
                    "question": "Un pack “PC + logiciels + support” est un exemple de ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Un bien", "is_correct": false},
                        {"text": "Un service", "is_correct": false},
                        {"text": "Un produit", "is_correct": true},
                        {"text": "Une ressource", "is_correct": false}
                    ],
                    "rationale": "Un produit est une configuration de ressources qui est ou sera proposée à des consommateurs.",
                    "hint": "C'est une offre complète pour le client."
                },
                {
                    "question": "Quelle est la relation entre les sorties (outputs) et les résultats (outcomes) ?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Les sorties sont la cause directe des résultats", "is_correct": false},
                        {"text": "Les sorties sont les services fournis, les résultats sont ce que le client réalise grâce à eux", "is_correct": true},
                        {"text": "Les sorties et les résultats sont synonymes", "is_correct": false},
                        {"text": "Les résultats sont indépendants des sorties", "is_correct": false}
                    ],
                    "rationale": "Les sorties sont ce qui est produit, les résultats sont l’effet obtenu.",
                    "hint": "Pensez à la différence entre livrables et bénéfices."
                },
                {
                    "question": "Quel est le but de la pratique de gestion de la continuité du service ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Assurer que les services peuvent continuer après une interruption majeure", "is_correct": true},
                        {"text": "Gérer les problèmes récurrents", "is_correct": false},
                        {"text": "Planifier les changements d'infrastructure", "is_correct": false},
                        {"text": "Fournir un support technique quotidien", "is_correct": false}
                    ],
                    "rationale": "Elle garantit la résilience des services face aux catastrophes.",
                    "hint": "C'est pour les situations d'urgence ou de crise."
                },
                {
                    "question": "Quel est le but de la pratique de gestion des fournisseurs ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Gérer les contrats avec les clients", "is_correct": false},
                        {"text": "Gérer les relations avec les tiers qui fournissent des services", "is_correct": true},
                        {"text": "Gérer les finances de l'organisation", "is_correct": false},
                        {"text": "Gérer les équipements internes", "is_correct": false}
                    ],
                    "rationale": "Elle assure une valeur optimale des fournisseurs.",
                    "hint": "Pensez aux parties externes qui contribuent au service."
                },
                {
                    "question": "Quel principe directeur est le plus pertinent pour la mise en œuvre de nouvelles technologies ?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Privilégier la valeur", "is_correct": false},
                        {"text": "Commencer là où vous êtes", "is_correct": false},
                        {"text": "Avancer par itérations avec des retours", "is_correct": true},
                        {"text": "Optimiser et automatiser", "is_correct": false}
                    ],
                    "rationale": "L'approche itérative avec retours est essentielle pour l'adoption de nouvelles technologies, permettant des ajustements et des améliorations continues.",
                    "hint": "Cette approche permet d'apprendre et de s'adapter."
                },
                {
                    "question": "Quelle est la définition d'un « résultat » (outcome) dans ITIL ?",
                    "difficulty": "hard",
                    "answer_options": [
                        {"text": "Un livrable spécifique du processus", "is_correct": false},
                        {"text": "Un état pour une partie prenante, facilité par une ou plusieurs sorties", "is_correct": true},
                        {"text": "L'ensemble des activités réalisées", "is_correct": false},
                        {"text": "La performance mesurable d'un service", "is_correct": false}
                    ],
                    "rationale": "Un résultat est ce que le consommateur réalise, un effet souhaité.",
                    "hint": "Il s'agit des bénéfices ou changements perçus par l'utilisateur."
                },
                {
                    "question": "Quel est le but de la pratique de surveillance et de gestion des événements ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Planifier les futurs événements", "is_correct": false},
                        {"text": "Observer les services et leurs composants pour détecter les changements d'état", "is_correct": true},
                        {"text": "Gérer les réservations de salles", "is_correct": false},
                        {"text": "Documenter les réunions", "is_correct": false}
                    ],
                    "rationale": "Elle détecte et analyse les événements pour déclencher des actions si nécessaire.",
                    "hint": "C'est l'écoute et l'observation constante du système."
                },
                {
                    "question": "Quel est le but de la pratique de gestion des actifs IT ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Créer de nouveaux logiciels", "is_correct": false},
                        {"text": "Planifier le budget IT", "is_correct": false},
                        {"text": "Gérer le cycle de vie des actifs IT", "is_correct": true},
                        {"text": "Former le personnel IT", "is_correct": false}
                    ],
                    "rationale": "Elle optimise le coût, le risque et la valeur des actifs tout au long de leur vie.",
                    "hint": "C'est la gestion de l'inventaire matériel et logiciel."
                },
                {
                    "question": "Quel principe directeur encourage la transparence et la communication ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Privilégier la valeur", "is_correct": false},
                        {"text": "Commencer là où vous êtes", "is_correct": false},
                        {"text": "Collaborer et promouvoir la visibilité", "is_correct": true},
                        {"text": "Avancer par itérations avec des retours", "is_correct": false}
                    ],
                    "rationale": "Il s'agit de s'assurer que toutes les parties prenantes ont une compréhension claire des choses et de travailler ensemble.",
                    "hint": "Éviter les silos et favoriser le partage."
                },
                {
                    "question": "La valeur pour une organisation peut être influencée par quels facteurs ?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Uniquement les facteurs financiers", "is_correct": false},
                        {"text": "Uniquement les facteurs technologiques", "is_correct": false},
                        {"text": "Les facteurs de qualité, de coût et de risque", "is_correct": true},
                        {"text": "Uniquement les facteurs humains", "is_correct": false}
                    ],
                    "rationale": "La valeur est souvent perçue comme un équilibre entre l'utilité, la garantie, le coût et le risque.",
                    "hint": "Pensez à ce qui rend un service 'bon' ou 'mauvais' pour une entreprise."
                },
                {
                    "question": "Quel est le but de la pratique de la gestion des relations ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Gérer les problèmes internes de l'équipe", "is_correct": false},
                        {"text": "Établir et maintenir des liens entre l'organisation et ses parties prenantes", "is_correct": true},
                        {"text": "Gérer les contrats de travail", "is_correct": false},
                        {"text": "Gérer les réseaux sociaux de l'entreprise", "is_correct": false}
                    ],
                    "rationale": "Elle assure la bonne communication et l'engagement des parties prenantes.",
                    "hint": "C'est l'art de construire des ponts et des partenariats."
                },
                {
                    "question": "Laquelle des affirmations suivantes est VRAIE concernant les coûts et les risques liés à la consommation d'un service ?",
                    "difficulty": "hard",
                    "answer_options": [
                        {"text": "Le consommateur n'est pas responsable des coûts et des risques liés à la consommation du service", "is_correct": false},
                        {"text": "Le consommateur supporte certains des coûts et risques liés à la consommation du service", "is_correct": true},
                        {"text": "Le fournisseur de services est entièrement responsable de tous les coûts et risques", "is_correct": false},
                        {"text": "Les coûts et les risques sont toujours les mêmes pour tous les consommateurs", "is_correct": false}
                    ],
                    "rationale": "ITIL 4 reconnaît que la valeur est co-créée, et que les consommateurs contribuent aux coûts et risques.",
                    "hint": "La responsabilité n'est pas unilatérale."
                },
                {
                    "question": "Quel est le but de la pratique de la gestion de portefeuille ?",
                    "difficulty": "medium",
                    "answer_options": [
                        {"text": "Gérer les finances de l'organisation", "is_correct": false},
                        {"text": "Maximiser la valeur des produits et services de l'organisation", "is_correct": true},
                        {"text": "Gérer les projets individuels", "is_correct": false},
                        {"text": "Gérer les ressources humaines", "is_correct": false}
                    ],
                    "rationale": "Elle garantit que l'organisation investit dans les bons services et produits.",
                    "hint": "C'est la vue d'ensemble des offres de l'organisation."
                },
                {
                    "question": "Les parties prenantes clés d'un service comprennent le fournisseur, le consommateur et quels autres groupes ?",
                    "difficulty": "hard",
                    "answer_options": [
                        {"text": "Uniquement les actionnaires", "is_correct": false},
                        {"text": "Les régulateurs et les auditeurs", "is_correct": false},
                        {"text": "Les fournisseurs tiers et d'autres parties intéressées", "is_correct": true},
                        {"text": "Uniquement les employés de l'entreprise", "is_correct": false}
                    ],
                    "rationale": "Les parties prenantes incluent tous ceux qui ont un intérêt ou sont affectés par le service.",
                    "hint": "Pensez à tous ceux qui ont un rôle ou un impact sur le service."
                },
                {
                    "question": "Quel est l'objectif de la pratique de la gestion des connaissances ?",
                    "difficulty": "easy",
                    "answer_options": [
                        {"text": "Créer de nouvelles connaissances", "is_correct": false},
                        {"text": "Partager des informations au sein de l'organisation", "is_correct": true},
                        {"text": "Protéger les secrets commerciaux", "is_correct": false},
                        {"text": "Gérer les documents physiques", "is_correct": false}
                    ],
                    "rationale": "Elle assure que les informations sont disponibles, appropriées et exploitables.",
                    "hint": "C'est la capitalisation et la diffusion de l'information."
                }
            ]
        };

        function displayQuestion(index) {
            loadingSpinner.style.display = 'none'; // Hide loading spinner once questions are loaded
            quizDisplayDiv.innerHTML = ''; // Clear previous question

            if (index >= 0 && index < questions.length) {
                const questionData = questions[index];
                const questionHtml = `
                    <div class="question-card">
                        <h5>${index + 1}. ${questionData.question} <span class="badge difficulty-badge ${questionData.difficulty}">${questionData.difficulty.charAt(0).toUpperCase() + questionData.difficulty.slice(1)}</span></h5>
                        <div class="options-container">
                            ${questionData.answer_options.map((option, i) => `
                                <div class="answer-option" data-index="${i}">
                                    <input type="radio" id="q${index}-option${i}" name="question${index}" value="${i}" ${userAnswers[index] === i ? 'checked' : ''} onchange="selectAnswer(${index}, ${i})">
                                    <label for="q${index}-option${i}">${String.fromCharCode(65 + i)}. ${option.text}</label>
                                </div>
                            `).join('')}
                        </div>
                        <button class="btn btn-info btn-toggle-info mt-3" onclick="toggleInfo(${index}, 'hint')">
                            <i class="fas fa-lightbulb me-2"></i> Afficher l'indice
                        </button>
                        <div class="hint mt-2" id="hint-${index}">${questionData.hint}</div>

                        <button class="btn btn-secondary btn-toggle-info mt-3" onclick="toggleInfo(${index}, 'rationale')">
                            <i class="fas fa-comment-dots me-2"></i> Afficher l'explication
                        </button>
                        <div class="rationale mt-2" id="rationale-${index}">
                            <h6>Explication:</h6>
                            <ul>
                                <li>${questionData.rationale}</li>
                            </ul>
                        </div>
                    </div>
                `;
                quizDisplayDiv.innerHTML = questionHtml;
                updateNavigationButtons();
                updateProgress();

                // Re-apply correct/incorrect classes if already answered
                if (userAnswers[index] !== null) {
                    highlightAnswer(index, userAnswers[index], true);
                }
            } else if (index === questions.length) {
                showResults();
            }
        }

        function selectAnswer(questionIndex, selectedOptionIndex) {
            const questionData = questions[questionIndex];
            const selectedOption = questionData.answer_options[selectedOptionIndex];

            // Clear previous highlighting
            const options = quizDisplayDiv.querySelectorAll('.answer-option');
            options.forEach(option => {
                option.classList.remove('correct', 'incorrect');
            });

            // Update user answer and score
            const previousAnswer = userAnswers[questionIndex];
            userAnswers[questionIndex] = selectedOptionIndex;

            if (previousAnswer === null || (previousAnswer !== null && selectedOption.is_correct !== questionData.answer_options[previousAnswer].is_correct)) {
                if (selectedOption.is_correct) {
                    score++;
                } else if (previousAnswer !== null && questionData.answer_options[previousAnswer].is_correct) {
                    score--;
                }
            }
            
            highlightAnswer(questionIndex, selectedOptionIndex);
            updateScoreDisplay();
        }

        function highlightAnswer(questionIndex, selectedOptionIndex, isLoad = false) {
            const questionData = questions[questionIndex];
            const options = quizDisplayDiv.querySelectorAll('.answer-option');

            options.forEach((optionElement, i) => {
                const inputRadio = optionElement.querySelector('input[type="radio"]');
                inputRadio.disabled = true; // Disable all options after selection

                if (questionData.answer_options[i].is_correct) {
                    optionElement.classList.add('correct');
                } else if (i === selectedOptionIndex && !questionData.answer_options[i].is_correct) {
                    optionElement.classList.add('incorrect');
                }
            });

            // Show rationale and hint automatically after answering
            toggleInfo(questionIndex, 'rationale', true);
            toggleInfo(questionIndex, 'hint', true);

            // Hide info toggle buttons
            quizDisplayDiv.querySelectorAll('.btn-toggle-info').forEach(btn => btn.style.display = 'none');
        }


        function toggleInfo(questionIndex, type, forceShow = false) {
            const infoElement = document.getElementById(`${type}-${questionIndex}`);
            if (infoElement) {
                if (forceShow || infoElement.style.display === 'none' || infoElement.style.display === '') {
                    infoElement.style.display = 'block';
                } else {
                    infoElement.style.display = 'none';
                }
            }
        }

        function updateNavigationButtons() {
            prevBtn.disabled = currentQuestionIndex === 0;
            nextBtn.disabled = currentQuestionIndex === questions.length; // Next button disabled on final results screen
        }

        function updateProgress() {
            currentScoreDisplay.textContent = `Score: ${score} / ${questions.length}`;
            questionCountDisplay.textContent = `Question: ${currentQuestionIndex + 1} / ${questions.length}`;
            const progressPercentage = (currentQuestionIndex / questions.length) * 100;
            questionProgressBar.style.width = `${progressPercentage}%`;
            questionProgressBar.setAttribute('aria-valuenow', progressPercentage);
        }

        function updateScoreDisplay() {
             currentScoreDisplay.textContent = `Score: ${score} / ${questions.length}`;
        }

        function nextQuestion() {
            if (currentQuestionIndex < questions.length) {
                currentQuestionIndex++;
                displayQuestion(currentQuestionIndex);
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion(currentQuestionIndex);
            }
        }

        function showResults() {
            quizDisplayDiv.innerHTML = `
                <div class="text-center my-5">
                    <h3>Quiz Terminé !</h3>
                    <p>Veuillez cliquer sur "Voir les résultats" pour votre score final.</p>
                </div>
            `;
            quizNavigationDiv.style.display = 'none'; // Hide navigation buttons

            const percentage = (score / questions.length) * 100;
            let recommendationsHtml = '';
            let scoreColor = '#28a745'; // Green for good score

            if (percentage >= 80) {
                recommendationsHtml = `
                    <h4>Félicitations ! Excellent travail !</h4>
                    <p>Vous avez une solide compréhension des concepts ITIL. Continuez à réviser pour maintenir votre niveau.</p>
                `;
            } else if (percentage >= 60) {
                scoreColor = '#ffc107'; // Yellow for average
                recommendationsHtml = `
                    <h4>Bon effort !</h4>
                    <p>Vous êtes sur la bonne voie. Concentrez-vous sur les domaines où vous avez eu des difficultés.</p>
                    <ul>
                        <li>Revoyez les concepts clés d'ITIL.</li>
                        <li>Pratiquez davantage avec des questions similaires.</li>
                    </ul>
                `;
            } else {
                scoreColor = '#dc3545'; // Red for low score
                recommendationsHtml = `
                    <h4>À revoir !</h4>
                    <p>Il semble y avoir des lacunes importantes. Voici quelques recommandations :</p>
                    <ul>
                        <li>Reprenez les bases d'ITIL depuis le début.</li>
                        <li>Étudiez systématiquement toutes les explications.</li>
                        <li>Considérez une formation préparatoire avant de tenter l'examen.</li>
                    </ul>
                `;
            }

            finalScoreCorrectSpan.textContent = score;
            finalScoreTotalSpan.textContent = questions.length;
            finalScorePercentage.textContent = `${percentage.toFixed(2)}%`;
            finalScorePercentage.style.color = scoreColor;
            finalRecommendationsDiv.innerHTML = recommendationsHtml;

            resultsModal.show();
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = new Array(questions.length).fill(null);
            quizNavigationDiv.style.display = 'flex';
            resultsModal.hide();
            displayQuestion(currentQuestionIndex);
        }

        // Attach navigation button handlers
        nextBtn.addEventListener('click', nextQuestion);
        prevBtn.addEventListener('click', previousQuestion);
        restartQuizBtnModal.addEventListener('click', restartQuiz);

        // Initial load of the quiz
        document.addEventListener('DOMContentLoaded', () => {
            loadingSpinner.style.display = 'none'; 
            questions = quizData.questions;
            displayQuestion(currentQuestionIndex);
        });
    </script>
</body>
</html>